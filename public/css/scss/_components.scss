@use 'variables' as *;

.btn{border:1px solid var(--line);background:var(--card);color:var(--ink);padding:$space-8 $space-12;border-radius:$space-10;cursor:pointer;font-weight:600;transition:background-color .2s,color .2s,filter .2s;display:flex;align-items:center;justify-content:center}
.btn:hover{filter:brightness(1.2)}
.btn:active{filter:brightness(.9)}
.btn:focus-visible{outline:$space-3 solid var(--accent);outline-offset:$space-2;transition:background-color .2s,color .2s}
.btn.primary{background:var(--accent);color:#fff;border-color:#2d74b8}
.btn.warn{background:#ffb74d;color:#271400;border-color:#bf7d19}
.btn.ghost{background:transparent;color:var(--muted);border-style:dashed}
.btn.icon-btn{padding:$space-8;min-width:0;width:2.5rem;height:2.5rem}
#d_gks_total{margin-left:auto;font-weight:700}
.pill{display:inline-flex;align-items:center;gap:$space-8;padding:$space-6 $space-10;border:1px solid var(--line);border-radius:999px;background:var(--card);color:var(--ink);font-weight:700}
.pill:has(input:checked){background:var(--accent);border-color:#2d74b8}
.pill.red:has(input:checked){background:var(--red);border-color:#a52623}
  #fastGrid .pill{
    padding:$space-10 $space-16;
    font-size:$font-lg;
  }
select option.red{color:var(--red)}
  .chip{
  display:inline-flex;
  align-items:center;
  justify-content:center;
  gap:$space-4;
    padding:$space-8 $space-10;
  border:1px solid var(--line);
    border-radius:999px;
    background:var(--card);
    color:var(--ink);
  cursor:pointer;
  user-select:none;
  font:inherit;
  outline:none;
}
  .chip:hover{filter:brightness(1.1)}
  .chip-status-icon{font-weight:700;width:1em;text-align:center}
label.chip input{
  position:absolute;
  opacity:0;
  pointer-events:none;
}
  .chip:focus-visible,
  .chip:focus-within{
    outline:$space-2 solid var(--accent);
    outline-offset:$space-2;
  }
.chip.active{background:var(--accent);color:#fff;border-color:#2d74b8}
.chip.active:hover{filter:brightness(1)}
.chip.red.active{background:var(--red);color:#fff;border-color:#a52623}
.chip.yellow.active{background:var(--yellow);color:#231b00;border-color:#8a7400}
.chip.auto{outline:$space-2 dashed var(--accent);outline-offset:$space-2}
  .chip-group{display:flex;flex-wrap:wrap;gap:$space-8}
    .gcs-calc{margin-top:$space-8;border:1px solid var(--line);border-radius:$space-10;padding:$space-8;background:var(--card)}
  .gcs-calc .grid{margin-bottom:$space-8}
  .blood-order-box{margin-top:$space-8;border:1px solid var(--line);border-radius:$space-10;padding:$space-8}
  .blood-order-box .row{gap:$space-8;flex-wrap:wrap;align-items:center}
    .breath-chip{padding:$space-8 $space-10;font-size:$font-lg}
    section[data-tab="B – Kvėpavimas"] h3{margin:$space-12 0 $space-4;font-size:$font-md;color:var(--muted)}
section[data-tab="B – Kvėpavimas"] h3:first-of-type{margin-top:0}
    .hint{color:var(--muted);font-size:0.875rem}
    .error-msg{color:var(--red);font-size:0.875rem}
input.invalid,select.invalid{border-color:var(--red)}
        .badge{padding:$space-2 $space-8;border-radius:$space-8;font-size:$font-xs;border:1px solid var(--line);background:var(--card);color:var(--muted)}
  .activation-dot{width:0.75rem;height:0.75rem;border-radius:50%;display:none;margin-left:$space-8}
  .activation-dot.red{background:var(--red);display:inline-block}
  .activation-dot.yellow{background:var(--yellow);display:inline-block}
  #activationStatusText{@extend .sr-only !optional}
        #saveStatus{color:var(--muted);font-size:$font-sm;margin-top:$space-4}
#saveStatus.offline{color:var(--yellow)}
#saveStatus.offline::before{content:'⚠ ';}
.split{display:flex;gap:$space-12;flex-wrap:wrap}
.split>div{flex:1}
.interv-groups{display:grid;gap:$space-12;grid-template-columns:repeat(auto-fit,minmax(260px,1fr))}
.interv-group{display:flex;flex-direction:column;gap:$space-8;background:var(--bg);border:1px solid var(--line);border-radius:$space-10;padding:$space-8}
.interv-group>.grid{grid-template-columns:repeat(auto-fill,minmax(160px,1fr))}
.interv-group.collapsed>.grid{display:none}
.med-search{margin-bottom:$space-8;width:100%}
/* SVG body map */
.map-toolbar{display:flex;gap:$space-8;flex-wrap:wrap;align-items:center;margin:$space-6 0}
    .tool{padding:$space-8 $space-10;border-radius:$space-10;border:1px solid var(--line);min-height:2.25rem;cursor:pointer;font-weight:700;display:inline-flex;align-items:center;gap:$space-8;--btn-color:var(--card);background:var(--btn-color);color:var(--ink);}
  .tool .icon{display:inline-flex;width:1em;height:1em;align-items:center;justify-content:center}
  .tool[data-tool="Ž"]{--btn-color:#ef5350;color:#fff}
  .tool[data-tool="S"]{--btn-color:#64b5f6;color:#000}
  .tool[data-tool="B"]{--btn-color:#ffd54f;color:#000}
  #btnUndo{--btn-color:#90a4ae;color:#000}
  #btnRedo{--btn-color:#90a4ae;color:#000}
  #btnClearMap{--btn-color:#ffb74d;color:#000}
  #btnExportSvg{--btn-color:#81c784;color:#000}
.tool.active{background:color-mix(in srgb,var(--btn-color),#000 20%);color:#fff;border-color:color-mix(in srgb,var(--btn-color),#000 30%)}
    #bodySvg{display:block;width:100%;height:auto;aspect-ratio:1500/1100;max-width:40rem;max-height:80vh;border:1px solid var(--line);border-radius:$space-12;background:var(--bg)}
.silhouette{fill:var(--accent);stroke:var(--accent);stroke-width:2}
    .label{fill:#a9b6c5;font:bold $font-lg system-ui}
.mark-w{stroke:#ef5350;stroke-width:3;fill:none}
.mark-b{fill:#64b5f6}
.burn-area{fill:color-mix(in srgb,var(--red) 60%,transparent);stroke:none}
#marks use.selected {
  outline: 2px solid var(--accent);
  outline-offset: 2px;
  transform: scale(1.1);
  transition: transform .2s;
}
  .zone{fill:transparent;cursor:pointer;transition:fill .2s}
  .zone.selected{fill:color-mix(in srgb,var(--accent) 80%,transparent)}
#navToggle{display:none}
#patientMenuToggle{
  display:none;
  width:3rem;
  height:3rem;
  border-radius:50%;
  padding:0;
}
.patient-menu{position:relative;display:flex;align-items:center}
.patient-menu[open]>summary{pointer-events:none}
.nav-overlay{position:fixed;inset:0;background:rgba(0,0,0,0.5);z-index:10;display:none}
body.nav-open .nav-overlay:not([hidden]){display:block}
.patient-menu-overlay{position:fixed;inset:0;background:rgba(0,0,0,0.5);z-index:10;display:none}
body.patient-menu-open .patient-menu-overlay:not([hidden]){display:block}
  @media (max-width:768px){
  #navToggle{display:inline-block;margin-bottom:$space-8}
  #patientMenuToggle{display:inline-flex;margin-bottom:$space-8;align-items:center;justify-content:center}
  .patient-menu-content{
    position:fixed;
    top:0;right:0;bottom:0;
    width:13.75rem;
      background:var(--card);
    transform:translateX(100%);
    transition:transform .3s ease;
    padding:$space-14 $space-16;
    overflow:auto;
    z-index:1100;
    pointer-events:none;
  }
  body.patient-menu-open .patient-menu-content{transform:translateX(0);pointer-events:auto}
  body.patient-menu-open{overflow:hidden}
  main{grid-template-columns:1fr}
  nav{
    position:fixed;
    top:0;left:0;bottom:0;
    width:13.75rem;
      background:var(--card);
    transform:translateX(-100%);
    transition:transform .3s ease;
    padding:$space-14 $space-16;
    overflow:auto;
    z-index:1100;
    pointer-events:none;
  }
  body.nav-open nav{transform:translateX(0);pointer-events:auto}
  body.nav-open{overflow:hidden}
}
/* Stroke app patient menu styles */
.header-actions .patient-menu{position:relative}
.header-actions .patient-menu>summary.btn{min-width:0}
.header-actions .patient-menu .menu{position:absolute;right:0;display:flex;flex-direction:column;gap:$space-4;background:var(--card);border:1px solid var(--line);border-radius:$space-10;padding:$space-8;margin-top:$space-4}
.header-actions .patient-menu .btn{
  width:100%;
  border:1px solid var(--line);
  border-color:color-mix(in srgb,var(--line),var(--ink) 30%);
}
@media (min-width:769px){
  .header-actions .patient-menu{position:static}
  .header-actions .patient-menu>summary.btn{display:none}
  .header-actions .patient-menu .menu{position:static;flex-direction:row;gap:$space-4;background:none;border:0;border-radius:0;padding:0;margin-top:0}
  .header-actions .patient-menu .btn{
    width:auto;
    border:1px solid var(--line);
    border-color:color-mix(in srgb,var(--line),var(--ink) 30%);
  }
}
@media print{ header,nav,.toolbar{display:none!important} body{background:#fff;color:#000} section.card{break-inside:avoid} }
/* Interventions compact layout */
section[data-tab="Intervencijos"] .card{padding:$space-8}
section[data-tab="Intervencijos"] .card .detail .grid{gap:$space-4}
section[data-tab="Intervencijos"] .med-search{margin-bottom:$space-8}
    section[data-tab="Intervencijos"] .interv-toggle{margin:0 0 $space-8;font-size:$font-sm;color:var(--muted);display:flex;align-items:center;gap:$space-4;background:none;border:none;cursor:pointer;padding:0;text-align:left}
/* Pain meds list layout */
#pain_meds{grid-template-columns:1fr;gap:$space-4}
#pain_meds .chip{width:100%;justify-content:flex-start;text-align:left;padding:$space-4 $space-8;white-space:normal}
/* Modal and toast components */
.modal-overlay{position:fixed;inset:0;background:rgba(0,0,0,0.5);display:flex;align-items:center;justify-content:center;z-index:1000}
  .modal{background:var(--card);color:var(--ink);padding:$space-20;border-radius:$space-10;box-shadow:0 2px 10px rgba(0,0,0,0.3);max-width:90%;width:20rem}
.modal p{margin-top:0}
.modal .actions{display:flex;justify-content:flex-end;gap:$space-8;margin-top:$space-16}
.toast-container{position:fixed;bottom:$space-20;right:$space-20;display:flex;flex-direction:column;gap:$space-8;z-index:1000}
.toast{background:var(--card);color:var(--ink);border:1px solid var(--line);padding:$space-10 $space-16;border-radius:$space-6;box-shadow:0 2px 6px rgba(0,0,0,0.2);transition:opacity .3s,transform .3s}
.toast.success{background:var(--green);color:#fff}
.toast.error{background:var(--red);color:#fff}
.toast.hide{opacity:0;transform:translateY($space-10)}
.arrival-timer{
  font-family:monospace;
  display:inline-flex;
  align-items:center;
  justify-content:center;
  text-align:center;
  font-size:$font-lg;
  min-width:6ch;
  padding:$space-8 $space-12;
  border-radius:$space-10;
  border:1px solid #2d74b8;
  background:var(--accent);
  color:#fff;
  font-weight:600;
}
