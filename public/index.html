<!DOCTYPE html>
<html lang="lt">
<head>
<meta charset="utf-8">
<meta name="viewport" content="width=device-width, initial-scale=1">
<title>Sunkios traumos forma</title>
<script>
  document.documentElement.classList.add('dark');
</script>
<link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;700&display=swap" rel="stylesheet">
<link rel="stylesheet" href="css/main.css">
<link rel="stylesheet" href="https://unpkg.com/vis-timeline@8.3.0/styles/vis-timeline-graph2d.min.css">
</head>
<body>
<a href="#views" class="skip-link">Skip to content</a>
<header id="appHeader" role="banner"></header>
<template id="chip-template">
  <span class="chip-status-icon" aria-hidden="true">âœ—</span>
  <span class="sr-only chip-status-text">not selected</span>
</template>

<main>
  <nav id="tabs" aria-label="Primary navigation"></nav>

  <div id="views">
    <!-- Aktyvacija -->
    <section class="card view" id="view-aktivacija" data-tab="Aktyvacija">
        <h2>Traumos komandos aktyvacija <span class="badge">GMP rodikliai â†’ auto</span></h2>
        <fieldset class="collapsible" id="activation-patient">
          <legend>Pacientas</legend>
          <div class="grid cols-3 cols-auto">
            <div>
              <label for="patient_age">AmÅ¾ius</label>
              <input id="patient_age" type="number" min="0" max="120" required aria-describedby="patient_age_hint" title="AmÅ¾ius 0-120">
              <div class="hint" id="patient_age_hint">0â€“120 metÅ³</div>
            </div>
            <div>
              <label for="patient_sex">Lytis</label>
              <select id="patient_sex" required aria-describedby="patient_sex_hint" title="Pasirinkite lytÄ¯">
                <option value=""></option>
                <option value="M">Vyras</option>
                <option value="F">Moteris</option>
                <option value="O">Kita / nenurodyta</option>
              </select>
              <div class="hint" id="patient_sex_hint">Pasirinkite lytÄ¯</div>
            </div>
            <div>
              <label for="patient_history">Ligos istorijos nr.</label>
              <input id="patient_history" type="text" required aria-describedby="patient_history_hint" title="Ä®veskite ligos istorijos numerÄ¯">
              <div class="hint" id="patient_history_hint">Privalomas laukas</div>
            </div>
          </div>
        </fieldset>

        <fieldset class="collapsible" id="activation-gmp">
          <legend>GMP rodikliai</legend>
          <div class="grid cols-3 cols-auto">
              <div><label for="gmp_hr">GMP Å SD (k./min)</label><input id="gmp_hr" type="number" min="0" max="250"></div>
              <div><label for="gmp_rr">GMP KD (k./min)</label><input id="gmp_rr" type="number" min="0" max="80"></div>
              <div><label for="gmp_spo2">GMP SpOâ‚‚ (%)</label><input id="gmp_spo2" type="number" min="0" max="100"></div>
          </div>
          <div class="grid cols-3 cols-auto mt-8">
              <div class="row"><div class="flex-1"><label for="gmp_sbp">GMP AKS s</label><input id="gmp_sbp" type="number" min="0" max="300"></div><div class="flex-1"><label for="gmp_dbp">GMP AKS d</label><input id="gmp_dbp" type="number" min="0" max="200"></div></div>
              <div><label>GMP GKS (A-K-M)</label><div class="row"><input id="gmp_gksa" type="number" min="1" max="4" placeholder="A"><input id="gmp_gksk" type="number" min="1" max="5" placeholder="K"><input id="gmp_gksm" type="number" min="1" max="6" placeholder="M"><span id="gmp_gks_total"></span></div></div>
              <div><label for="gmp_time">GMP praneÅ¡imo laikas</label><div class="row"><input id="gmp_time" type="time"><button type="button" class="btn ghost" id="btnGmpNow">Dabar</button></div></div>
          </div>
          <div class="grid cols-2 cols-auto mt-8">
              <div><label for="gmp_mechanism">Traumos mechanizmas</label><input id="gmp_mechanism" type="text"></div>
              <div><label for="gmp_notes">Pastabos</label><input id="gmp_notes" type="text" placeholder="Trumpai..."></div>
          </div>
        </fieldset>

        <fieldset class="collapsible" id="activation-criteria">
          <legend>Aktyvacijos kriterijai</legend>
          <div class="split mt-12">
            <div>
              <label><strong>RAUDONA</strong></label>
              <div class="chip-group" id="chips_red" aria-label="RAUDONA">
                <button type="button" class="chip red" data-value="GKS &lt; 9" aria-pressed="false">GKS &lt; 9</button>
                <button type="button" class="chip red" data-value="KD &lt; 8 ar &gt; 30/min" aria-pressed="false">KD &lt; 8 ar &gt; 30/min</button>
                <button type="button" class="chip red" data-value="AKS &lt; 90 mmHg" aria-pressed="false">AKS &lt; 90 mmHg</button>
                <button type="button" class="chip red" data-value="SpOâ‚‚ &lt; 90%" aria-pressed="false">SpOâ‚‚ &lt; 90%</button>
                <button type="button" class="chip red" data-value="Å SD &gt; 120/min" aria-pressed="false">Å SD &gt; 120/min</button>
                <button type="button" class="chip red" data-value="Stridoras" aria-pressed="false">Stridoras</button>
                <button type="button" class="chip red" data-value="LÅ«Å¾Ä™ 2 ilgieji kaulai/dubuo" aria-pressed="false">LÅ«Å¾Ä™ 2 ilgieji kaulai/dubuo</button>
                <button type="button" class="chip red" data-value="Kiauriniai suÅ¾. kakle/krÅ«tinÄ—je/juosmenyje" aria-pressed="false">Kiauriniai suÅ¾. kakle/krÅ«tinÄ—je/juosmenyje</button>
                <button type="button" class="chip red" data-value="Ä®tariamas vidinis kraujavimas" aria-pressed="false">Ä®tariamas vidinis kraujavimas</button>
                <button type="button" class="chip red" data-value="Nestabili krÅ«tinÄ—s lÄ…sta" aria-pressed="false">Nestabili krÅ«tinÄ—s lÄ…sta</button>
                <button type="button" class="chip red" data-value="Nudegimas &gt;18% ar KT nudegimas" aria-pressed="false">Nudegimas &gt;18% ar KT nudegimas</button>
                <button type="button" class="chip red" data-value="Amputacijos aukÅ¡Äiau plaÅ¡t./pÄ—dÅ³" aria-pressed="false">Amputacijos aukÅ¡Äiau plaÅ¡t./pÄ—dÅ³</button>
              </div>
            </div>
            <div>
              <label><strong>GELTONA</strong></label>
              <div class="chip-group" id="chips_yellow" aria-label="GELTONA">
                <button type="button" class="chip yellow" data-value="PÄ—st./dvir./motociklo trauma" aria-pressed="false">PÄ—st./dvir./motociklo trauma</button>
                <button type="button" class="chip yellow" data-value="Sprogimas/susiÅ¡audymas" aria-pressed="false">Sprogimas/susiÅ¡audymas</button>
                <button type="button" class="chip yellow" data-value="Kritimas &gt;3 m ar nardymas" aria-pressed="false">Kritimas &gt;3 m ar nardymas</button>
                <button type="button" class="chip yellow" data-value="ReikÄ—jo gelbÄ—tojÅ³ pagalbos" aria-pressed="false">ReikÄ—jo gelbÄ—tojÅ³ pagalbos</button>
              </div>
            </div>
          </div>
          <div class="hint mt-6">Auto-aktyvacija â€“ tik iÅ¡ GMP rodikliÅ³; rankiniai pakeitimai iÅ¡lieka.</div>
        </fieldset>
    </section>

    <!-- A -->
    <section class="card view" id="view-a" data-tab="A â€“ KvÄ—pavimo takai">
      <h2>A â€“ KvÄ—pavimo takai</h2>
      <label>Takai</label>
      <div class="chip-group" id="a_airway_group" data-single="true" aria-label="Takai">
        <button type="button" class="chip" data-value="Atviri" aria-pressed="false">Atviri</button>
        <button type="button" class="chip red" data-value="Obstrukcija" aria-pressed="false">Obstrukcija</button>
        <button type="button" class="chip red" data-value="Ä®vesta laringinÄ— kaukÄ—" aria-pressed="false">Ä®vesta laringinÄ— kaukÄ—</button>
        <button type="button" class="chip red" data-value="Intubuotas" aria-pressed="false">Intubuotas</button>
        <button type="button" class="chip red" data-value="Kita" aria-pressed="false">Kita</button>
      </div>
      <div class="row mt-8"><label class="m-0" for="a_notes">Pastabos</label><input id="a_notes" type="text" placeholder="Trumpai..."></div>
    </section>

    <!-- B -->
    <section class="card view" id="view-b" data-tab="B â€“ KvÄ—pavimas">
      <h2>B â€“ KvÄ—pavimas</h2>
        <fieldset class="collapsible" id="breathing-vitals">
          <legend>Gyvybiniai rodikliai</legend>
          <div class="grid cols-2 cols-auto">
            <div><label for="b_rr">KD (k./min)</label><input id="b_rr" type="number" min="0" max="80"></div>
            <div><label for="b_spo2">SpOâ‚‚ (%)</label><input id="b_spo2" type="number" min="0" max="100"></div>
          </div>
        </fieldset>
        <fieldset class="collapsible" id="breathing-breath" data-open="true">
          <legend>Alsavimas</legend>
          <div class="row">
            <div>
              <div class="subtle">KairÄ—</div>
              <div class="chip-group" id="b_breath_left_group" data-single="true" aria-label="Alsavimas â€“ KairÄ—">
                <button type="button" class="chip breath-chip" data-value="Normalus" aria-label="Normalus" title="Normalus">Normalus</button>
                <button type="button" class="chip breath-chip red breath-toggle" data-value="_kita" aria-label="Kita" title="Kita">Kita</button>
                <button type="button" class="chip breath-chip red breath-option hidden" data-value="NeiÅ¡klausomas">NeiÅ¡klausomas</button>
                <button type="button" class="chip breath-chip red breath-option hidden" data-value="SusilpnÄ—jÄ™s">SusilpnÄ—jÄ™s</button>
                <button type="button" class="chip breath-chip red breath-option hidden" data-value="Kita">Kita</button>
              </div>
            </div>
            <div>
              <div class="subtle">DeÅ¡inÄ—</div>
              <div class="chip-group" id="b_breath_right_group" data-single="true" aria-label="Alsavimas â€“ DeÅ¡inÄ—">
                <button type="button" class="chip breath-chip" data-value="Normalus" aria-label="Normalus" title="Normalus">Normalus</button>
                <button type="button" class="chip breath-chip red breath-toggle" data-value="_kita" aria-label="Kita" title="Kita">Kita</button>
                <button type="button" class="chip breath-chip red breath-option hidden" data-value="NeiÅ¡klausomas">NeiÅ¡klausomas</button>
                <button type="button" class="chip breath-chip red breath-option hidden" data-value="SusilpnÄ—jÄ™s">SusilpnÄ—jÄ™s</button>
                <button type="button" class="chip breath-chip red breath-option hidden" data-value="Kita">Kita</button>
              </div>
            </div>
          </div>
        </fieldset>
        <fieldset class="collapsible" id="breathing-vent">
          <legend>PagalbinÄ— ventiliacija</legend>
          <div class="row flex-wrap">
            <div class="row">
              <button type="button" class="btn" id="btnOxygen">O2</button>
              <div id="oxygenFields" class="row hidden">
                <input id="b_oxygen_liters" type="number" min="0" max="25" placeholder="L/min" class="w-80">
                <select id="b_oxygen_type">
                  <option value="KaukÄ— su rez.">KaukÄ— su rez.</option>
                  <option value="KaukÄ—">KaukÄ—</option>
                  <option value="NosinÄ—s kaniulÄ—s">NosinÄ—s kaniulÄ—s</option>
                </select>
              </div>
            </div>
            <div class="row">
              <button type="button" class="btn" id="btnDPV">DPV</button>
              <div id="dpvFields" class="row hidden">
                <input id="b_dpv_fio2" type="number" step="0.01" min="0" max="1" placeholder="FiOâ‚‚">
              </div>
            </div>
          </div>
        </fieldset>
    </section>

    <!-- C -->
    <section class="card view" id="view-c" data-tab="C â€“ Kraujotaka">
      <h2>C â€“ Kraujotaka</h2>
      <div class="grid cols-3 cols-auto">
        <div><label for="c_hr">Å SD (k./min)</label><input id="c_hr" type="number" min="0" max="250"></div>
        <div class="row"><div class="flex-1"><label for="c_sbp">AKS s</label><input id="c_sbp" type="number" min="0" max="300"></div><div class="flex-1"><label for="c_dbp">AKS d</label><input id="c_dbp" type="number" min="0" max="200"></div></div>
        <div><label for="c_caprefill">KPL (sek.)</label><input id="c_caprefill" type="number" step="0.1" min="0" max="20"></div>
      </div>
    </section>

    <!-- D -->
    <section class="card view" id="view-d" data-tab="D â€“ SÄ…monÄ—">
      <h2>D â€“ SÄ…monÄ—</h2>
      <div>
        <label>GKS (A-K-M) <span class="subtle">(15b. mygtukas uÅ¾pildo 4/5/6)</span></label>
        <div class="row">
            <input id="d_gksa" class="gcs-input" type="number" min="1" max="4" placeholder="A">
            <input id="d_gksk" class="gcs-input" type="number" min="1" max="5" placeholder="K">
            <input id="d_gksm" class="gcs-input" type="number" min="1" max="6" placeholder="M">
            <button type="button" class="btn" id="btnGCS15">15b.</button>
            <button type="button" class="btn" id="btnGCSCalc">SkaiÄiuoti</button>
            <span id="d_gks_total"></span>
        </div>
        <div id="d_gcs_calc" class="gcs-calc hidden">
          <div class="grid cols-3 cols-auto">
            <div>
              <label for="d_gcs_calc_a">AkiÅ³ atmerkimas (A)</label>
              <select id="d_gcs_calc_a">
                <option value=""></option>
                <option value="4">akys atmerktos spontaniÅ¡kai</option>
                <option value="3" class="red">akys atveriamos Ä¯ garsÄ…</option>
                <option value="2" class="red">akys atveriamos Ä¯ skausmÄ…</option>
                <option value="1" class="red">akys neatveriamos</option>
              </select>
            </div>
            <div>
              <label for="d_gcs_calc_k">Kalba (K)</label>
              <select id="d_gcs_calc_k">
                <option value=""></option>
                <option value="5">orientuota kalba</option>
                <option value="4" class="red">paini kalba</option>
                <option value="3" class="red">atskiri Å¾odÅ¾iai</option>
                <option value="2" class="red">neaiÅ¡kÅ«s garsai</option>
                <option value="1" class="red">nereaguoja</option>
              </select>
            </div>
            <div>
              <label for="d_gcs_calc_m">JudesiÅ³ reakcija (M)</label>
              <select id="d_gcs_calc_m">
                <option value=""></option>
                <option value="6">vykdo komandas</option>
                <option value="5" class="red">lokalizuoja skausmÄ…</option>
                <option value="4" class="red">atitraukia nuo skausmo</option>
                <option value="3" class="red">nenormali fleksija (lenkia Ä¯ skausmÄ…)</option>
                <option value="2" class="red">nenormali ekstensija (iÅ¡tiesia Ä¯ skausmÄ…)</option>
                <option value="1" class="red">nereaguoja</option>
              </select>
            </div>
          </div>
          <div class="row mt-8">
            <button type="button" class="btn" id="d_gcs_apply">Taikyti</button>
            <span id="d_gcs_calc_total"></span>
          </div>
        </div>
      </div>
      <div class="mt-8">
        <label>VyzdÅ¾iai â€“ KairÄ—</label>
        <div class="chip-group" id="d_pupil_left_group" data-single="true" aria-label="VyzdÅ¾iai â€“ KairÄ—"><button type="button" class="chip" data-value="n.y." aria-pressed="false">n.y.</button><button type="button" class="chip red" data-value="kita" aria-pressed="false">kita</button></div>
        <input id="d_pupil_left_note" type="text" placeholder="Pastabos..." class="hidden mt-6">
      </div>
      <div class="mt-8">
        <label>VyzdÅ¾iai â€“ DeÅ¡inÄ—</label>
        <div class="chip-group" id="d_pupil_right_group" data-single="true" aria-label="VyzdÅ¾iai â€“ DeÅ¡inÄ—"><button type="button" class="chip" data-value="n.y." aria-pressed="false">n.y.</button><button type="button" class="chip red" data-value="kita" aria-pressed="false">kita</button></div>
        <input id="d_pupil_right_note" type="text" placeholder="Pastabos..." class="hidden mt-6">
      </div>
      <div class="row mt-8"><label class="m-0" for="d_notes">Pastabos</label><input id="d_notes" type="text" placeholder="Trumpai..."></div>
    </section>

    <!-- E -->
    <section class="card view" id="view-e" data-tab="E â€“ Kita">
      <h2>E â€“ Kita</h2>
      <div class="grid cols-3 cols-auto">
        <div><label for="e_temp">TemperatÅ«ra (Â°C)</label><input id="e_temp" type="number" step="0.1" min="30" max="43"></div>
        <div><label for="e_back_notes">Nugaros apÅ¾iÅ«ra</label><div class="row"><label class="pill" for="e_back_ny"><input id="e_back_ny" type="checkbox"> n.y.</label><input id="e_back_notes" type="text" placeholder="Pastabos..."></div></div>
        <div><label for="e_other">Kitos pastabos</label><input id="e_other" type="text" placeholder="..."></div>
      </div>

      <div class="divider"></div>
      <h3 class="h3-muted m-0 mb-6">KÅ«no Å¾emÄ—lapis (SVG) â€“ Å½aizda (Å½), SumuÅ¡imas (S), Nudegimas (N)</h3>
      <div class="map-toolbar">
        <button type="button" class="tool" data-tool="Å½">Å½aizda</button>
        <button type="button" class="tool" data-tool="S">SumuÅ¡imas</button>
        <button type="button" class="tool" data-tool="N">Nudegimas</button>
        <span class="flex-1"></span>
        <button type="button" class="tool" id="btnUndo">â†© Anuliuoti</button>
        <button type="button" class="tool" id="btnDelete">âœ– PaÅ¡alinti</button>
        <button type="button" class="tool" id="btnClearMap">ğŸ§¹ IÅ¡valyti</button>
        <button type="button" class="tool" id="btnExportSvg">â¬‡ Eksportuoti SVG</button>
      </div>

      <!-- SVG BODY MAP -->
      <div id="selectedLocations"></div>
      <svg id="bodySvg" viewBox="0 0 800 900" xmlns="http://www.w3.org/2000/svg">
        <!-- Marker symbols -->
        <defs>
          <g id="sym-wound">
            <circle r="14" class="mark-w"/>
            <path d="M-10 0 L10 0 M0 -10 L0 10" class="mark-w"/>
          </g>
          <g id="sym-bruise">
            <circle r="10" class="mark-b"/>
          </g>
          <g id="sym-burn">
            <polygon points="0,-12 12,0 0,12 -12,0" class="mark-n"/>
          </g>
        </defs>

        <!-- FRONT silhouette -->
        <g id="layer-front" transform="translate(0,0)">
          <text x="16" y="28" class="label">PRIEKIS</text>
          <g class="silhouette" id="front-shape" data-side="front" transform="translate(0,50) scale(15.5,21.05) translate(-11,-6)">
            <!-- Silhouette paths from Health Icons (CC0) -->
            <path fill-rule="evenodd" clip-rule="evenodd" d="M24 12C25.6569 12 27 10.6569 27 9C27 7.34315 25.6569 6 24 6C22.3431 6 21 7.34315 21 9C21 10.6569 22.3431 12 24 12ZM24 14C26.7614 14 29 11.7614 29 9C29 6.23858 26.7614 4 24 4C21.2386 4 19 6.23858 19 9C19 11.7614 21.2386 14 24 14Z"/>
            <path fill-rule="evenodd" clip-rule="evenodd" d="M17.374 18.3144C18.3174 18.494 19 19.3188 19 20.2792L19 41C19 41.5523 19.4477 42 20 42H20.0868C20.604 42 21.0359 41.6056 21.0827 41.0905L22 31C22.0029 29.8975 22.8975 29.0052 24 29.0052C25.1025 29.0052 25.9971 29.8974 26 30.9999L26.9173 41.0905C26.9641 41.6056 27.396 42 27.9132 42H28C28.5523 42 29 41.5523 29 41V20.3169C29 19.3564 29.6828 18.5316 30.6264 18.3521C32.3824 18.0182 34.2392 17.5548 36.2798 16.9601C36.8101 16.8056 37.1146 16.2505 36.9601 15.7202C36.8056 15.19 36.2505 14.8855 35.7202 15.04C31.0861 16.3906 27.5307 17.0156 24.0043 16.9998C20.4743 16.9839 16.9146 16.3259 12.2674 15.0365C11.7352 14.8888 11.1841 15.2005 11.0364 15.7327C10.8888 16.2649 11.2005 16.816 11.7327 16.9636C13.7658 17.5278 15.6186 17.9803 17.374 18.3144ZM22.9779 41.8025C22.6245 43.0798 21.4552 44 20.0868 44H20C18.3431 44 17 42.6569 17 41L17 20.2792C15.1742 19.9317 13.2653 19.4645 11.1979 18.8908C9.60138 18.4478 8.66625 16.7945 9.10925 15.1979C9.55225 13.6014 11.2056 12.6663 12.8021 13.1093C17.3715 14.3772 20.7371 14.9851 24.0132 14.9998C27.2788 15.0144 30.6314 14.4399 35.1606 13.1199C36.7513 12.6563 38.4166 13.57 38.8802 15.1606C39.3438 16.7513 38.4301 18.4166 36.8394 18.8802C34.7552 19.4876 32.8345 19.9681 31 20.3169V41C31 42.6569 29.6569 44 28 44H27.9132C26.5448 44 25.3755 43.0798 25.0221 41.8025C24.9897 41.6851 24.9641 41.5647 24.9458 41.4417C24.9375 41.3856 24.9307 41.3288 24.9255 41.2716L24.0082 31.1811C24.0029 31.1223 24.0002 31.0637 24 31.0052C23.9998 31.0637 23.9971 31.1223 23.9918 31.1811L23.0745 41.2716C23.0693 41.3288 23.0625 41.3856 23.0542 41.4417C23.0359 41.5647 23.0103 41.6851 22.9779 41.8025Z"/>
          </g>
          <g id="zones-front" class="zones" transform="translate(0,50) scale(15.5,21.05) translate(-11,-6)">
            <polygon class="zone" data-zone="head-front" data-area="4.5" points="19,0 29,0 29,14 19,14"/>
            <polygon class="zone" data-zone="chest-front" data-area="9" points="14,14 34,14 34,26 14,26"/>
            <polygon class="zone" data-zone="abdomen-front" data-area="9" points="14,26 34,26 34,38 14,38"/>
            <polygon class="zone" data-zone="arm-left-front" data-area="4.5" points="5,14 14,14 14,38 5,38"/>
            <polygon class="zone" data-zone="arm-right-front" data-area="4.5" points="34,14 43,14 43,38 34,38"/>
            <polygon class="zone" data-zone="leg-left-front" data-area="9" points="18,38 26,38 26,48 18,48"/>
            <polygon class="zone" data-zone="leg-right-front" data-area="9" points="26,38 34,38 34,48 26,48"/>
            <polygon class="zone" data-zone="perineum-front" data-area="1" points="23,38 29,38 29,41 23,41"/>
          </g>
        </g>

        <!-- BACK silhouette -->
        <g id="layer-back" transform="translate(400,0)">
          <text x="16" y="28" class="label">NUGARA</text>
          <g class="silhouette" id="back-shape" data-side="back" transform="translate(0,50) scale(15.5,21.05) translate(-11,-6)">
            <!-- Silhouette paths from Health Icons (CC0) -->
            <path fill-rule="evenodd" clip-rule="evenodd" d="M24 12C25.6569 12 27 10.6569 27 9C27 7.34315 25.6569 6 24 6C22.3431 6 21 7.34315 21 9C21 10.6569 22.3431 12 24 12ZM24 14C26.7614 14 29 11.7614 29 9C29 6.23858 26.7614 4 24 4C21.2386 4 19 6.23858 19 9C19 11.7614 21.2386 14 24 14Z"/>
            <path fill-rule="evenodd" clip-rule="evenodd" d="M17.374 18.3144C18.3174 18.494 19 19.3188 19 20.2792L19 41C19 41.5523 19.4477 42 20 42H20.0868C20.604 42 21.0359 41.6056 21.0827 41.0905L22 31C22.0029 29.8975 22.8975 29.0052 24 29.0052C25.1025 29.0052 25.9971 29.8974 26 30.9999L26.9173 41.0905C26.9641 41.6056 27.396 42 27.9132 42H28C28.5523 42 29 41.5523 29 41V20.3169C29 19.3564 29.6828 18.5316 30.6264 18.3521C32.3824 18.0182 34.2392 17.5548 36.2798 16.9601C36.8101 16.8056 37.1146 16.2505 36.9601 15.7202C36.8056 15.19 36.2505 14.8855 35.7202 15.04C31.0861 16.3906 27.5307 17.0156 24.0043 16.9998C20.4743 16.9839 16.9146 16.3259 12.2674 15.0365C11.7352 14.8888 11.1841 15.2005 11.0364 15.7327C10.8888 16.2649 11.2005 16.816 11.7327 16.9636C13.7658 17.5278 15.6186 17.9803 17.374 18.3144ZM22.9779 41.8025C22.6245 43.0798 21.4552 44 20.0868 44H20C18.3431 44 17 42.6569 17 41L17 20.2792C15.1742 19.9317 13.2653 19.4645 11.1979 18.8908C9.60138 18.4478 8.66625 16.7945 9.10925 15.1979C9.55225 13.6014 11.2056 12.6663 12.8021 13.1093C17.3715 14.3772 20.7371 14.9851 24.0132 14.9998C27.2788 15.0144 30.6314 14.4399 35.1606 13.1199C36.7513 12.6563 38.4166 13.57 38.8802 15.1606C39.3438 16.7513 38.4301 18.4166 36.8394 18.8802C34.7552 19.4876 32.8345 19.9681 31 20.3169V41C31 42.6569 29.6569 44 28 44H27.9132C26.5448 44 25.3755 43.0798 25.0221 41.8025C24.9897 41.6851 24.9641 41.5647 24.9458 41.4417C24.9375 41.3856 24.9307 41.3288 24.9255 41.2716L24.0082 31.1811C24.0029 31.1223 24.0002 31.0637 24 31.0052C23.9998 31.0637 23.9971 31.1223 23.9918 31.1811L23.0745 41.2716C23.0693 41.3288 23.0625 41.3856 23.0542 41.4417C23.0359 41.5647 23.0103 41.6851 22.9779 41.8025Z"/>
          </g>
          <g id="zones-back" class="zones" transform="translate(0,50) scale(15.5,21.05) translate(-11,-6)">
            <polygon class="zone" data-zone="head-back" data-area="4.5" points="19,0 29,0 29,14 19,14"/>
            <polygon class="zone" data-zone="upper-back" data-area="9" points="14,14 34,14 34,26 14,26"/>
            <polygon class="zone" data-zone="lower-back" data-area="9" points="14,26 34,26 34,38 14,38"/>
            <polygon class="zone" data-zone="arm-left-back" data-area="4.5" points="5,14 14,14 14,38 5,38"/>
            <polygon class="zone" data-zone="arm-right-back" data-area="4.5" points="34,14 43,14 43,38 34,38"/>
            <polygon class="zone" data-zone="leg-left-back" data-area="9" points="18,38 26,38 26,48 18,48"/>
            <polygon class="zone" data-zone="leg-right-back" data-area="9" points="26,38 34,38 34,48 26,48"/>
          </g>
        </g>

        <!-- MARKS container -->
        <g id="marks"></g>
      </svg>
      <div id="burnTotal" class="hint mt-2"></div>
      <div class="hint">SpragtelÄ—kite ant figÅ«ros â€“ Ä¯dedama pasirinkta Å¾yma.</div>
    </section>

    <!-- Intervencijos -->
    <section class="card view" id="view-intervencijos" data-tab="Intervencijos">
      <h2>Intervencijos</h2>
      <input id="medSearch" type="text" placeholder="IeÅ¡koti intervencijÅ³â€¦" aria-label="IeÅ¡koti intervencijÅ³" class="med-search">
      <div class="interv-groups">
        <section class="interv-group">
          <button class="interv-toggle" aria-expanded="true">ğŸ’Š Medikamentai â€“ skausmo kontrolÄ—</button>
          <div class="grid" id="pain_meds"></div>
        </section>
        <section class="interv-group">
          <button class="interv-toggle" aria-expanded="true">ğŸ’Š Medikamentai â€“ kraujavimo kontrolÄ—</button>
          <div class="grid cols-3 cols-auto" id="bleeding_meds"></div>
        </section>
        <section class="interv-group">
          <button class="interv-toggle" aria-expanded="true">ğŸ’Š Medikamentai â€“ kita</button>
          <div class="grid cols-3 cols-auto" id="other_meds"></div>
        </section>
        <section class="interv-group">
          <button class="interv-toggle" aria-expanded="true">ğŸ›  ProcedÅ«ros</button>
          <div class="grid cols-3 cols-auto" id="procedures"></div>
        </section>
      </div>
      <div class="hint mt-6">Paspaudus ant vaisto automatiÅ¡kai uÅ¾pildomi laikas ir standartinÄ— dozÄ— (galima koreguoti), o ant procedÅ«ros â€“ tik laikas.</div>
    </section>

    <!-- Vaizdai / Laboratorija / Komanda / Sprendimas / Santrauka -->
    <section class="card view" id="view-vaizdiniai-tyrimai" data-tab="Vaizdiniai tyrimai">
      <h2>Vaizdiniai tyrimai</h2>
      <h3 class="h3-muted">FAST</h3>
      <div class="grid cols-3 cols-auto" id="fastGrid"></div>
      <h3 class="h3-muted mt-8">KT</h3>
      <div class="chip-group" id="imaging_ct" aria-label="KT"></div>
      <h3 class="h3-muted mt-8">Rentgenogramos</h3>
      <div class="chip-group" id="imaging_xray" aria-label="Rentgenogramos"></div>
      <h3 class="h3-muted mt-8">Kiti</h3>
      <div class="chip-group" id="imaging_other_group" aria-label="Kiti vaizdiniai tyrimai"></div>
      <input id="imaging_other" type="text" placeholder="Ä®vesti kitÄ… tyrimÄ…" class="hidden mt-8">
    </section>
    <section class="card view" id="view-laboratorija" data-tab="Laboratorija">
      <h2>Laboratoriniai tyrimai</h2>
      <div class="chip-group" id="labs_basic" aria-label="Laboratoriniai tyrimai"></div>
      <div class="blood-order-box">
        <label for="bloodUnits">Kraujo uÅ¾sakymas</label>
        <div class="row flex-wrap">
          <input type="number" id="bloodUnits" placeholder="Vnt" class="w-80">
          <div class="chip-group" id="bloodGroup" data-single="true" aria-label="Kraujo grupÄ—"></div>
          <button type="button" class="btn" id="addBloodOrder">PridÄ—ti</button>
        </div>
      </div>
    </section>
    <section class="card view" id="view-komanda" data-tab="Komanda"><h2>Komandos nariai</h2><div class="grid cols-3 cols-auto" id="teamGrid"></div></section>
    <section class="card view" id="view-sprendimas" data-tab="Sprendimas">
      <h2>Sprendimas</h2>
      <div><label for="spr_time">Laikas</label><div class="row"><input id="spr_time" type="time"><button type="button" class="btn ghost" id="btnSprNow">Dabar</button></div></div>
      <div class="mt-8">
        <label>Sprendimas</label>
        <div class="chip-group" id="spr_decision_group" data-single="true" aria-label="Sprendimas">
          <button type="button" class="chip" data-value="Stacionarizavimas" aria-pressed="false">Stacionarizavimas</button>
          <button type="button" class="chip" data-value="Namo" aria-pressed="false">Namo</button>
          <button type="button" class="chip" data-value="StebÄ—jimas SMPS" aria-pressed="false">StebÄ—jimas SMPS</button>
          <button type="button" class="chip" data-value="Mirtis" aria-pressed="false">Mirtis</button>
          <button type="button" class="chip" data-value="PerveÅ¾imas Ä¯ kitÄ… ligoninÄ™" aria-pressed="false">PerveÅ¾imas Ä¯ kitÄ… ligoninÄ™</button>
        </div>
      </div>
      <div id="spr_skyrius_container" class="hidden mt-8">
        <label for="spr_skyrius">Skyrius</label>
        <select id="spr_skyrius">
          <option value=""></option>
          <option value="CHRITS">CHRITS</option>
          <option value="Traumatologijos">Traumatologijos</option>
          <option value="Chirurgijos">Chirurgijos</option>
          <option value="Neurochirurgijos">Neurochirurgijos</option>
          <option value="Kita">Kita</option>
        </select>
        <input id="spr_skyrius_kita" type="text" placeholder="Kitas skyrius" class="hidden mt-4">
      </div>
      <div id="spr_ligonine_container" class="hidden mt-8">
        <label for="spr_ligonine">LigoninÄ—</label>
        <input id="spr_ligonine" type="text" placeholder="LigoninÄ—">
      </div>
      <div class="grid cols-3 cols-auto mt-8">
        <div><label for="spr_hr">Å SD (k./min)</label><input id="spr_hr" type="number" min="0" max="250"></div>
        <div><label for="spr_rr">KD (k./min)</label><input id="spr_rr" type="number" min="0" max="80"></div>
        <div><label for="spr_spo2">SpOâ‚‚ (%)</label><input id="spr_spo2" type="number" min="0" max="100"></div>
      </div>
      <div class="row mt-8">
        <div class="flex-1"><label for="spr_sbp">AKS s</label><input id="spr_sbp" type="number" min="0" max="300"></div>
        <div class="flex-1"><label for="spr_dbp">AKS d</label><input id="spr_dbp" type="number" min="0" max="200"></div>
      </div>
      <div class="mt-8">
        <label>GKS (A-K-M)</label>
        <div class="row">
          <input id="spr_gksa" type="number" min="1" max="4" placeholder="A">
          <input id="spr_gksk" type="number" min="1" max="5" placeholder="K">
          <input id="spr_gksm" type="number" min="1" max="6" placeholder="M">
          <button type="button" class="btn" id="btnSprGCSCalc">SkaiÄiuoti</button>
          <span id="spr_gks_total"></span>
        </div>
        <div id="spr_gcs_calc" class="gcs-calc hidden">
          <div class="grid cols-3 cols-auto">
            <div>
              <label for="spr_gcs_calc_a">AkiÅ³ atmerkimas (A)</label>
              <select id="spr_gcs_calc_a">
                <option value=""></option>
                <option value="4">akys atmerktos spontaniÅ¡kai</option>
                <option value="3">akys atveriamos Ä¯ garsÄ…</option>
                <option value="2">akys atveriamos Ä¯ skausmÄ…</option>
                <option value="1">akys neatveriamos</option>
              </select>
            </div>
            <div>
              <label for="spr_gcs_calc_k">Kalba (K)</label>
              <select id="spr_gcs_calc_k">
                <option value=""></option>
                <option value="5">orientuota kalba</option>
                <option value="4">paini kalba</option>
                <option value="3">atskiri Å¾odÅ¾iai</option>
                <option value="2">neaiÅ¡kÅ«s garsai</option>
                <option value="1">nereaguoja</option>
              </select>
            </div>
            <div>
              <label for="spr_gcs_calc_m">JudesiÅ³ reakcija (M)</label>
              <select id="spr_gcs_calc_m">
                <option value=""></option>
                <option value="6">vykdo komandas</option>
                <option value="5">lokalizuoja skausmÄ…</option>
                <option value="4">atitraukia nuo skausmo</option>
                <option value="3">nenormali fleksija (lenkia Ä¯ skausmÄ…)</option>
                <option value="2">nenormali ekstensija (iÅ¡tiesia Ä¯ skausmÄ…)</option>
                <option value="1">nereaguoja</option>
              </select>
            </div>
          </div>
          <div class="row mt-8">
            <button type="button" class="btn" id="spr_gcs_apply">Taikyti</button>
            <span id="spr_gcs_calc_total"></span>
          </div>
        </div>
      </div>
    </section>
    <section class="card view" id="view-laiko-juosta" data-tab="Laiko juosta">
      <h2>Laiko juosta</h2>
      <div class="row mb-8">
        <select id="timelineFilter">
          <option value="">Visi</option>
          <option value="med">Vaistai</option>
          <option value="proc">ProcedÅ«ros</option>
        <option value="vital">Gyvybiniai rodikliai</option>
      </select>
      <button type="button" class="btn" id="timelineExport">Eksportuoti</button>
      <button type="button" class="btn" id="timelineClear">IÅ¡valyti</button>
    </div>
    <div id="timelineGraph" class="timeline-graph mb-8"></div>
    <div id="timelineList" class="timeline-list"></div>
  </section>
    <section class="card view" id="view-santrauka" data-tab="Santrauka"><h2>Sugeneruotas tekstas</h2><textarea id="output" placeholder="Santrauka sugeneruojama automatiÅ¡kai"></textarea><div class="row mb-8"><button type="button" class="btn" id="btnCopyReport">Kopijuoti</button></div><div class="hint">TekstÄ… galima Ä¯klijuoti Ä¯ LIS/ESIS.</div></section>
  </div>
</main>

<script src="https://unpkg.com/vis-timeline@8.3.0/standalone/umd/vis-timeline-graph2d.min.js"></script>
<script src="/socket.io/socket.io.js"></script>
<script src="js/app.js" defer type="module"></script>
</body>
</html>
