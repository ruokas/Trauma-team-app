<!DOCTYPE html>
<html lang="lt">
<head>
<meta charset="utf-8">
<meta name="viewport" content="width=device-width, initial-scale=1">
<title>Traumos forma â€“ Desktop v9 (SVG kÅ«no Å¾emÄ—lapis)</title>
<link rel="stylesheet" href="css/main.css">
</head>
<body>
<header>
  <div class="wrap">
    <h1>Traumos forma â€“ Desktop v9</h1>
    <div class="sub">Aktyvacija Â· ABCDE Â· LT Â· SVG kÅ«no Å¾emÄ—lapis <span id="activationIndicator" class="activation-dot"></span></div>
    <div class="toolbar">
      <button type="button" class="btn primary" id="btnGen">Sugeneruoti ataskaitÄ…</button>
      <button type="button" class="btn" id="btnCopy">Kopijuoti</button>
      <button type="button" class="btn" id="btnSave">IÅ¡saugoti</button>
      <button type="button" class="btn ghost" id="btnClear">IÅ¡valyti</button>
      <button type="button" class="btn warn" id="btnPrint">ğŸ–¨ Spausdinti</button>
    </div>
  </div>
</header>

<main>
  <nav id="tabs"></nav>

  <div id="views">
    <!-- Aktyvacija -->
    <section class="card view" data-tab="Aktyvacija">
        <h2>Traumos komandos aktyvacija <span class="badge">GMP rodikliai â†’ auto</span></h2>
      <div class="grid cols-3">
          <div><label>GMP Å SD (k./min)</label><input id="gmp_hr" type="number" min="0" max="250"></div>
          <div><label>GMP KD (k./min)</label><input id="gmp_rr" type="number" min="0" max="80"></div>
          <div><label>GMP SpOâ‚‚ (%)</label><input id="gmp_spo2" type="number" min="0" max="100"></div>
      </div>
      <div class="grid cols-3" style="margin-top:8px">
          <div class="row"><div style="flex:1"><label>GMP AKS s</label><input id="gmp_sbp" type="number" min="0" max="300"></div><div style="flex:1"><label>GMP AKS d</label><input id="gmp_dbp" type="number" min="0" max="200"></div></div>
          <div><label>GMP GKS (A-K-M)</label><div class="row"><input id="gmp_gksa" type="number" min="1" max="4" placeholder="A"><input id="gmp_gksk" type="number" min="1" max="5" placeholder="K"><input id="gmp_gksm" type="number" min="1" max="6" placeholder="M"><span id="gmp_gks_total"></span></div></div>
          <div><label>GMP praneÅ¡imo laikas</label><div class="row" style="gap:8px;align-items:center;"><input id="gmp_time" type="time"><button type="button" class="btn ghost" id="btnGmpNow">Dabar</button></div></div>
      </div>
      <div class="grid cols-2" style="margin-top:8px">
          <div><label>Traumos mechanizmas</label><input id="gmp_mechanism" type="text"></div>
          <div><label>Pastabos</label><input id="gmp_notes" type="text" placeholder="Trumpai..."></div>
      </div>
      <div class="split" style="margin-top:12px">
        <div>
          <label><strong>RAUDONA</strong></label>
          <div class="chip-group" id="chips_red">
            <button type="button" class="chip red" data-value="GKS &lt; 9" aria-pressed="false">GKS &lt; 9</button>
            <button type="button" class="chip red" data-value="KD &lt; 8 ar &gt; 30/min" aria-pressed="false">KD &lt; 8 ar &gt; 30/min</button>
            <button type="button" class="chip red" data-value="AKS &lt; 90 mmHg" aria-pressed="false">AKS &lt; 90 mmHg</button>
            <button type="button" class="chip red" data-value="SpOâ‚‚ &lt; 90%" aria-pressed="false">SpOâ‚‚ &lt; 90%</button>
            <button type="button" class="chip red" data-value="Å SD &gt; 120/min" aria-pressed="false">Å SD &gt; 120/min</button>
            <button type="button" class="chip red" data-value="Stridoras" aria-pressed="false">Stridoras</button>
            <button type="button" class="chip red" data-value="LÅ«Å¾Ä™ 2 ilgieji kaulai/dubuo" aria-pressed="false">LÅ«Å¾Ä™ 2 ilgieji kaulai/dubuo</button>
            <button type="button" class="chip red" data-value="Kiauriniai suÅ¾. kakle/krÅ«tinÄ—je/juosmenyje" aria-pressed="false">Kiauriniai suÅ¾. kakle/krÅ«tinÄ—je/juosmenyje</button>
            <button type="button" class="chip red" data-value="Ä®tariamas vidinis kraujavimas" aria-pressed="false">Ä®tariamas vidinis kraujavimas</button>
            <button type="button" class="chip red" data-value="Nestabili krÅ«tinÄ—s lÄ…sta" aria-pressed="false">Nestabili krÅ«tinÄ—s lÄ…sta</button>
            <button type="button" class="chip red" data-value="Nudegimas &gt;18% ar KT nudegimas" aria-pressed="false">Nudegimas &gt;18% ar KT nudegimas</button>
            <button type="button" class="chip red" data-value="Amputacijos aukÅ¡Äiau plaÅ¡t./pÄ—dÅ³" aria-pressed="false">Amputacijos aukÅ¡Äiau plaÅ¡t./pÄ—dÅ³</button>
          </div>
        </div>
        <div>
          <label><strong>GELTONA</strong></label>
          <div class="chip-group" id="chips_yellow">
            <button type="button" class="chip yellow" data-value="PÄ—st./dvir./motociklo trauma" aria-pressed="false">PÄ—st./dvir./motociklo trauma</button>
            <button type="button" class="chip yellow" data-value="Sprogimas/susiÅ¡audymas" aria-pressed="false">Sprogimas/susiÅ¡audymas</button>
            <button type="button" class="chip yellow" data-value="Kritimas &gt;3 m ar nardymas" aria-pressed="false">Kritimas &gt;3 m ar nardymas</button>
            <button type="button" class="chip yellow" data-value="ReikÄ—jo gelbÄ—tojÅ³ pagalbos" aria-pressed="false">ReikÄ—jo gelbÄ—tojÅ³ pagalbos</button>
          </div>
        </div>
      </div>
        <div class="hint" style="margin-top:6px">Auto-aktyvacija â€“ tik iÅ¡ GMP rodikliÅ³; rankiniai pakeitimai iÅ¡lieka.</div>
    </section>

    <!-- A -->
    <section class="card view" data-tab="A â€“ KvÄ—pavimo takai">
      <h2>A â€“ KvÄ—pavimo takai</h2>
      <label>Takai</label>
      <div class="chip-group" id="a_airway_group" data-single="true">
        <button type="button" class="chip" data-value="Atviri" aria-pressed="false">Atviri</button>
        <button type="button" class="chip" data-value="UÅ¾tikrinti (intub./GMP)" aria-pressed="false">UÅ¾tikrinti (intub./GMP)</button>
        <button type="button" class="chip" data-value="Kita" aria-pressed="false">Kita</button>
      </div>
      <div class="row" style="margin-top:8px"><label style="margin:0">Pastabos</label><input id="a_notes" type="text" placeholder="Trumpai..."></div>
    </section>

    <!-- B -->
    <section class="card view" data-tab="B â€“ KvÄ—pavimas">
      <h2>B â€“ KvÄ—pavimas</h2>
      <div class="grid cols-2">
        <div><label>KD (k./min)</label><input id="b_rr" type="number" min="0" max="80"></div>
        <div><label>SpOâ‚‚ (%)</label><input id="b_spo2" type="number" min="0" max="100"></div>
      </div>
      <div style="margin-top:8px">
        <label>Alsavimas</label>
        <div class="row">
          <div><div class="subtle">KairÄ—</div><div class="chip-group" id="b_breath_left_group" data-single="true"><button type="button" class="chip breath-chip" data-value="+" aria-pressed="false">+</button><button type="button" class="chip breath-chip" data-value="-" aria-pressed="false">-</button></div></div>
          <div><div class="subtle">DeÅ¡inÄ—</div><div class="chip-group" id="b_breath_right_group" data-single="true"><button type="button" class="chip breath-chip" data-value="+" aria-pressed="false">+</button><button type="button" class="chip breath-chip" data-value="-" aria-pressed="false">-</button></div></div>
        </div>
      </div>
      <div class="row" style="margin-top:8px;flex-wrap:wrap">
        <div class="row" style="gap:8px;align-items:center;">
          <button type="button" class="btn" id="btnOxygen">O2</button>
          <div id="oxygenFields" class="row" style="display:none;gap:8px;">
            <input id="b_oxygen_liters" type="number" min="0" max="25" placeholder="L/min" style="width:80px">
            <select id="b_oxygen_type">
              <option value="KaukÄ— su rez.">KaukÄ— su rez.</option>
              <option value="KaukÄ—">KaukÄ—</option>
              <option value="NosinÄ—s kaniulÄ—s">NosinÄ—s kaniulÄ—s</option>
            </select>
          </div>
        </div>
        <div class="row" style="gap:8px;align-items:center;">
          <button type="button" class="btn" id="btnDPV">DPV</button>
          <div id="dpvFields" class="row" style="display:none;gap:8px;">
            <input id="b_dpv_fio2" type="number" step="0.01" min="0" max="1" placeholder="FiOâ‚‚">
          </div>
        </div>
      </div>
    </section>

    <!-- C -->
    <section class="card view" data-tab="C â€“ Kraujotaka">
      <h2>C â€“ Kraujotaka</h2>
      <div class="grid cols-3">
        <div><label>Å SD (k./min)</label><input id="c_hr" type="number" min="0" max="250"></div>
        <div class="row"><div style="flex:1"><label>AKS s</label><input id="c_sbp" type="number" min="0" max="300"></div><div style="flex:1"><label>AKS d</label><input id="c_dbp" type="number" min="0" max="200"></div></div>
        <div><label>KPL (sek.)</label><input id="c_caprefill" type="number" step="0.1" min="0" max="20"></div>
      </div>
    </section>

    <!-- D -->
    <section class="card view" data-tab="D â€“ SÄ…monÄ—">
      <h2>D â€“ SÄ…monÄ—</h2>
      <div class="grid cols-3">
        <div>
          <label>GKS (A-K-M) <span class="subtle">(15b. mygtukas uÅ¾pildo 4/5/6)</span></label>
          <div class="row">
              <input id="d_gksa" type="number" min="1" max="4" placeholder="A">
              <input id="d_gksk" type="number" min="1" max="5" placeholder="K">
              <input id="d_gksm" type="number" min="1" max="6" placeholder="M">
          </div>
          <div class="row">
              <button type="button" class="btn" id="btnGCS15">15b.</button>
              <button type="button" class="btn" id="btnGCSCalc">SkaiÄiuoti</button>
              <span id="d_gks_total"></span>
          </div>
        </div>
        <div>
          <label>VyzdÅ¾iai â€“ KairÄ—</label>
          <div class="chip-group" id="d_pupil_left_group" data-single="true"><button type="button" class="chip" data-value="n.y." aria-pressed="false">n.y.</button><button type="button" class="chip" data-value="kita" aria-pressed="false">kita</button></div>
          <input id="d_pupil_left_note" type="text" placeholder="Pastabos..." style="margin-top:6px;display:none">
        </div>
        <div>
          <label>VyzdÅ¾iai â€“ DeÅ¡inÄ—</label>
          <div class="chip-group" id="d_pupil_right_group" data-single="true"><button type="button" class="chip" data-value="n.y." aria-pressed="false">n.y.</button><button type="button" class="chip" data-value="kita" aria-pressed="false">kita</button></div>
          <input id="d_pupil_right_note" type="text" placeholder="Pastabos..." style="margin-top:6px;display:none">
        </div>
      </div>
      <div class="row" style="margin-top:8px"><label style="margin:0">Pastabos</label><input id="d_notes" type="text" placeholder="Trumpai..."></div>
    </section>

    <!-- E -->
    <section class="card view" data-tab="E â€“ Kita">
      <h2>E â€“ Kita</h2>
      <div class="grid cols-3">
        <div><label>TemperatÅ«ra (Â°C)</label><input id="e_temp" type="number" step="0.1" min="30" max="43"></div>
        <div><label>Nugaros apÅ¾iÅ«ra</label><div class="row"><label class="pill"><input id="e_back_ny" type="checkbox"> n.y.</label><input id="e_back_notes" type="text" placeholder="Pastabos..."></div></div>
        <div><label>Kitos pastabos</label><input id="e_other" type="text" placeholder="..."></div>
      </div>

      <div class="divider"></div>
      <h3 style="font-size:14px;margin:0 0 6px;color:var(--muted)">KÅ«no Å¾emÄ—lapis (SVG) â€“ Å½aizda (Å½), SumuÅ¡imas (S), Nudegimas (N)</h3>
      <div class="map-toolbar">
        <button type="button" class="tool" data-tool="Å½">Å½aizda</button>
        <button type="button" class="tool" data-tool="S">SumuÅ¡imas</button>
        <button type="button" class="tool" data-tool="N">Nudegimas</button>
        <span style="flex:1"></span>
        <button type="button" class="tool" id="btnSide">â†º Rodyti: Priekis</button>
        <button type="button" class="tool" id="btnUndo">â†© Anuliuoti</button>
        <button type="button" class="tool" id="btnClearMap">ğŸ§¹ IÅ¡valyti</button>
        <button type="button" class="tool" id="btnExportSvg">â¬‡ Eksportuoti SVG</button>
      </div>

      <!-- SVG BODY MAP -->
      <svg id="bodySvg" viewBox="0 0 400 900" xmlns="http://www.w3.org/2000/svg">
        <!-- Marker symbols -->
        <defs>
          <g id="sym-wound">
            <circle r="14" class="mark-w"/>
            <path d="M-10 0 L10 0 M0 -10 L0 10" class="mark-w"/>
          </g>
          <g id="sym-bruise">
            <circle r="10" class="mark-b"/>
          </g>
          <g id="sym-burn">
            <polygon points="0,-12 12,0 0,12 -12,0" class="mark-n"/>
          </g>
        </defs>

        <!-- FRONT silhouette -->
        <g id="layer-front">
          <text x="16" y="28" class="label">PRIEKIS</text>
          <g class="silhouette" id="front-shape">
            <circle cx="200" cy="90" r="45"/>
            <path d="M182,135 L218,135 L224,160 L176,160 Z"/>
            <path d="M116,160 C106,250 126,330 150,390 L250,390 C274,330 294,250 284,160 Z"/>
            <path d="M116,170 C60,230 56,310 88,380 L110,420 L126,410 C108,350 118,280 152,215 Z"/>
            <path d="M284,170 C340,230 344,310 312,380 L290,420 L274,410 C292,350 282,280 248,215 Z"/>
            <path d="M150,390 C160,430 170,450 200,458 C230,450 240,430 250,390 Z"/>
            <path d="M182,458 L168,730 L192,730 L206,458 Z"/>
            <path d="M218,458 L232,730 L208,730 L194,458 Z"/>
            <path d="M168,730 C140,748 168,760 192,760 L192,730 Z"/>
            <path d="M232,730 C260,748 232,760 208,760 L208,730 Z"/>
          </g>
        </g>

        <!-- BACK silhouette -->
        <g id="layer-back" class="hidden">
          <text x="16" y="28" class="label">NUGARA</text>
          <g class="silhouette" id="back-shape">
            <circle cx="200" cy="90" r="45"/>
            <path d="M182,135 L218,135 L224,160 L176,160 Z"/>
            <path d="M116,160 C108,250 120,335 150,395 L250,395 C280,335 292,250 284,160 Z"/>
            <path d="M116,170 C68,230 64,305 94,370 L118,410 L134,398 C116,345 122,280 156,215 Z"/>
            <path d="M284,170 C332,230 336,305 306,370 L282,410 L266,398 C284,345 278,280 244,215 Z"/>
            <path d="M150,395 C160,435 170,452 200,460 C230,452 240,435 250,395 Z"/>
            <path d="M182,460 L170,730 L194,730 L206,460 Z"/>
            <path d="M218,460 L230,730 L206,730 L194,460 Z"/>
            <path d="M170,730 C142,748 170,760 194,760 L194,730 Z"/>
            <path d="M230,730 C258,748 230,760 206,760 L206,730 Z"/>
          </g>
        </g>

        <!-- MARKS container -->
        <g id="marks"></g>
      </svg>
      <div class="hint">SpragtelÄ—kite ant figÅ«ros â€“ Ä¯dedama pasirinkta Å¾yma. Priekis/Nugara â€“ perjungimas virÅ¡uje.</div>
    </section>

    <!-- Intervencijos -->
    <section class="card view" data-tab="Intervencijos">
      <h2>Intervencijos</h2>
      <input id="medSearch" type="text" placeholder="IeÅ¡koti medikamentÅ³..." style="margin-bottom:8px;width:100%">
      <div class="split">
        <div><h3 style="margin:0 0 6px;font-size:14px;color:var(--muted)">ğŸ’Š Medikamentai â€“ skausmo kontrolÄ—</h3><div class="grid cols-3" id="pain_meds"></div></div>
        <div><h3 style="margin:0 0 6px;font-size:14px;color:var(--muted)">ğŸ’Š Medikamentai â€“ kraujavimo kontrolÄ—</h3><div class="grid cols-3" id="bleeding_meds"></div></div>
        <div><h3 style="margin:0 0 6px;font-size:14px;color:var(--muted)">ğŸ’Š Medikamentai â€“ kita</h3><div class="grid cols-3" id="other_meds"></div></div>
        <div><h3 style="margin:0 0 6px;font-size:14px;color:var(--muted)">ğŸ›  ProcedÅ«ros</h3><div class="grid cols-3" id="procedures"></div></div>
      </div>
      <div class="hint" style="margin-top:6px">Paspaudus ant vaisto/procedÅ«ros automatiÅ¡kai uÅ¾pildomi laikas ir standartinÄ— dozÄ— (galima koreguoti).</div>
    </section>

    <!-- Vaizdai / Laboratorija / Komanda / Sprendimas / Ataskaita -->
    <section class="card view" data-tab="Vaizdiniai tyrimai"><h2>Vaizdiniai tyrimai</h2><div class="chip-group" id="imaging_basic"></div><input id="imaging_other" type="text" placeholder="Ä®vesti kitÄ… tyrimÄ…" style="display:none;margin-top:8px;"><h3 style="margin-top:12px;font-size:14px;color:var(--muted)">FAST</h3><div class="grid cols-3" id="fastGrid"></div></section>
    <section class="card view" data-tab="Laboratorija"><h2>Laboratoriniai tyrimai</h2><div class="chip-group" id="labs_basic"></div><button type="button" class="btn" id="btnBloodOrder" style="margin-top:8px">Kraujo uÅ¾sakymas</button><div id="bloodOrderInfo" class="hint" style="margin-top:8px"></div><input type="number" id="blood_units" style="display:none"><input type="text" id="blood_group" style="display:none"></section>
    <section class="card view" data-tab="Komanda"><h2>Komandos nariai</h2><div class="grid cols-3" id="teamGrid"></div></section>
    <section class="card view" data-tab="Sprendimas">
      <h2>Sprendimas</h2>
      <div><label>Laikas</label><div class="row" style="gap:8px;align-items:center;"><input id="spr_time" type="time"><button type="button" class="btn ghost" id="btnSprNow">Dabar</button></div></div>
      <div style="margin-top:8px">
        <label>Sprendimas</label>
        <div class="chip-group" id="spr_decision_group" data-single="true">
          <button type="button" class="chip" data-value="Stacionarizavimas" aria-pressed="false">Stacionarizavimas</button>
          <button type="button" class="chip" data-value="Namo" aria-pressed="false">Namo</button>
          <button type="button" class="chip" data-value="StebÄ—jimas SMPS" aria-pressed="false">StebÄ—jimas SMPS</button>
          <button type="button" class="chip" data-value="Mirtis" aria-pressed="false">Mirtis</button>
          <button type="button" class="chip" data-value="PerveÅ¾imas Ä¯ kitÄ… ligoninÄ™" aria-pressed="false">PerveÅ¾imas Ä¯ kitÄ… ligoninÄ™</button>
        </div>
      </div>
      <div id="spr_skyrius_container" style="margin-top:8px;display:none;">
        <label>Skyrius</label>
        <select id="spr_skyrius">
          <option value=""></option>
          <option value="CHRITS">CHRITS</option>
          <option value="Traumatologijos">Traumatologijos</option>
          <option value="Chirurgijos">Chirurgijos</option>
          <option value="Neurochirurgijos">Neurochirurgijos</option>
          <option value="Kita">Kita</option>
        </select>
        <input id="spr_skyrius_kita" type="text" placeholder="Kitas skyrius" style="display:none;margin-top:4px;">
      </div>
      <div id="spr_ligonine_container" style="margin-top:8px;display:none;">
        <label>LigoninÄ—</label>
        <input id="spr_ligonine" type="text" placeholder="LigoninÄ—">
      </div>
      <div class="grid cols-3" style="margin-top:8px">
        <div><label>Å SD (k./min)</label><input id="spr_hr" type="number" min="0" max="250"></div>
        <div><label>KD (k./min)</label><input id="spr_rr" type="number" min="0" max="80"></div>
        <div><label>SpOâ‚‚ (%)</label><input id="spr_spo2" type="number" min="0" max="100"></div>
      </div>
      <div class="row" style="margin-top:8px">
        <div style="flex:1"><label>AKS s</label><input id="spr_sbp" type="number" min="0" max="300"></div>
        <div style="flex:1"><label>AKS d</label><input id="spr_dbp" type="number" min="0" max="200"></div>
      </div>
      <div style="margin-top:8px">
        <label>GKS (A-K-M)</label>
        <div class="row">
          <input id="spr_gksa" type="number" min="1" max="4" placeholder="A">
          <input id="spr_gksk" type="number" min="1" max="5" placeholder="K">
          <input id="spr_gksm" type="number" min="1" max="6" placeholder="M">
        </div>
      </div>
    </section>
    <section class="card view" data-tab="Ataskaita"><h2>Sugeneruotas tekstas</h2><textarea id="output" placeholder="Spauskite â€Sugeneruoti ataskaitÄ…â€œ..."></textarea><div class="hint">TekstÄ… galima Ä¯klijuoti Ä¯ LIS/ESIS.</div></section>
  </div>
</main>

<script src="js/app.js" defer type="module"></script>
</body>
</html>
