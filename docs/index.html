<!DOCTYPE html>
<html lang="lt">
<head>
<meta charset="utf-8">
<meta name="viewport" content="width=device-width, initial-scale=1">
<title>Sunkios traumos forma</title>
<script>
  const savedTheme = localStorage.getItem('trauma_theme') || 'dark';
  document.documentElement.classList.add(savedTheme,'js');
</script>
<link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;700&display=swap" rel="stylesheet">
<link rel="stylesheet" href="css/main.css">
<link rel="stylesheet" href="https://unpkg.com/vis-timeline@8.3.0/styles/vis-timeline-graph2d.min.css">
<style>
  .silhouette { pointer-events: none; }
</style>
</head>
<body>
<a href="#views" class="skip-link">Skip to content</a>
<header id="appHeader" role="banner"></header>
<template id="chip-template">
  <span class="chip-status-icon" aria-hidden="true">âœ—</span>
  <span class="sr-only chip-status-text">not selected</span>
</template>

<main>
  <nav id="tabs" aria-label="Primary navigation" hidden></nav>

  <div id="views">
    <!-- Aktyvacija -->
    <section class="card view" id="view-aktivacija" data-tab="Aktyvacija">
        <h2>Traumos komandos aktyvacija <span class="badge">GMP rodikliai â†’ auto</span></h2>
        <fieldset class="collapsible" id="activation-patient">
          <legend>Pacientas</legend>
          <div class="grid cols-3 cols-auto">
            <div>
              <label for="patient_age">AmÅ¾ius</label>
              <input id="patient_age" type="number" min="0" max="120" required aria-describedby="patient_age_hint" title="AmÅ¾ius 0-120">
              <div class="hint" id="patient_age_hint">0â€“120 metÅ³</div>
            </div>
            <div>
              <label for="patient_sex">Lytis</label>
              <select id="patient_sex" required aria-describedby="patient_sex_hint" title="Pasirinkite lytÄ¯">
                <option value=""></option>
                <option value="M">Vyras</option>
                <option value="F">Moteris</option>
                <option value="O">Kita / nenurodyta</option>
              </select>
              <div class="hint" id="patient_sex_hint">Pasirinkite lytÄ¯</div>
            </div>
            <div>
              <label for="patient_history">Ligos istorijos nr.</label>
              <input id="patient_history" type="text" required aria-describedby="patient_history_hint" title="Ä®veskite ligos istorijos numerÄ¯">
              <div class="hint" id="patient_history_hint">Privalomas laukas</div>
            </div>
          </div>
        </fieldset>

        <fieldset class="collapsible" id="activation-gmp">
          <legend>GMP rodikliai</legend>
          <div class="grid cols-3 cols-auto">
              <div><label for="gmp_hr">GMP Å SD (k./min)</label><input id="gmp_hr" type="number" min="0" max="250" title="Å SD â€“ beats per minute, 0â€“250"></div>
              <div><label for="gmp_rr">GMP KD (k./min)</label><input id="gmp_rr" type="number" min="0" max="80" title="KD â€“ breaths per minute, 0â€“80"></div>
              <div><label for="gmp_spo2">GMP SpOâ‚‚ (%)</label><input id="gmp_spo2" type="number" min="0" max="100" title="SpOâ‚‚ â€“ percent, 0â€“100"></div>
          </div>
          <div class="grid cols-3 cols-auto mt-8">
              <div class="row"><div class="flex-1"><label for="gmp_sbp">GMP AKS s</label><input id="gmp_sbp" type="number" min="0" max="300" title="AKS s â€“ mmHg, 0â€“300"></div><div class="flex-1"><label for="gmp_dbp">GMP AKS d</label><input id="gmp_dbp" type="number" min="0" max="200" title="AKS d â€“ mmHg, 0â€“200"></div></div>
              <div><label>GMP GKS (A-K-M)</label><div class="row"><input id="gmp_gksa" type="number" min="1" max="4" placeholder="A"><input id="gmp_gksk" type="number" min="1" max="5" placeholder="K"><input id="gmp_gksm" type="number" min="1" max="6" placeholder="M"><span id="gmp_gks_total"></span></div></div>
              <div>
                <label for="gmp_time">GMP praneÅ¡imo laikas</label>
                <div class="row">
                  <input id="gmp_time" type="time" aria-describedby="gmp_time_hint" title="24 val. formatas (HH:MM)">
                  <button type="button" class="btn ghost" id="btnGmpNow" aria-describedby="gmp_time_hint" title="Ä®raÅ¡yti dabartinÄ¯ laikÄ…">Dabar</button>
                </div>
                <div class="hint" id="gmp_time_hint">Naudokite 24 val. formatÄ… (HH:MM); mygtukas â€Dabarâ€œ Ä¯raÅ¡o dabartinÄ¯ laikÄ….</div>
              </div>
          </div>
          <div class="grid cols-2 cols-auto mt-8">
              <div>
                <label for="gmp_mechanism">Traumos mechanizmas</label>
                <input id="gmp_mechanism" type="text" list="gmp_mechanism_list" aria-describedby="gmp_mechanism_hint" title="Galite pasirinkti iÅ¡ sÄ…raÅ¡o arba Ä¯vesti savo tekstÄ…">
                <datalist id="gmp_mechanism_list">
                  <option value="Autoavarija"></option>
                  <option value="Kritimas"></option>
                  <option value="Motociklo avarija"></option>
                  <option value="Å autinÄ— Å¾aizda"></option>
                  <option value="DurinÄ— Å¾aizda"></option>
                  <option value="Nudegimas"></option>
                </datalist>
                <div class="hint" id="gmp_mechanism_hint">Galite pasirinkti iÅ¡ sÄ…raÅ¡o arba Ä¯vesti savo tekstÄ…</div>
              </div>
              <div><label for="gmp_notes">Pastabos</label><input id="gmp_notes" type="text" placeholder="Trumpai..."></div>
          </div>
        </fieldset>

        <fieldset class="collapsible" id="activation-criteria">
          <legend>Aktyvacijos kriterijai</legend>
          <div class="split mt-12">
            <div>
              <label><strong>RAUDONA</strong></label>
              <div class="chip-group" id="chips_red" aria-label="RAUDONA">
                <button type="button" class="chip red" data-value="GKS &lt; 9" aria-pressed="false">GKS &lt; 9</button>
                <button type="button" class="chip red" data-value="KD &lt; 8 ar &gt; 30/min" aria-pressed="false">KD &lt; 8 ar &gt; 30/min</button>
                <button type="button" class="chip red" data-value="AKS &lt; 90 mmHg" aria-pressed="false">AKS &lt; 90 mmHg</button>
                <button type="button" class="chip red" data-value="SpOâ‚‚ &lt; 90%" aria-pressed="false">SpOâ‚‚ &lt; 90%</button>
                <button type="button" class="chip red" data-value="Å SD &gt; 120/min" aria-pressed="false">Å SD &gt; 120/min</button>
                <button type="button" class="chip red" data-value="Stridoras" aria-pressed="false">Stridoras</button>
                <button type="button" class="chip red" data-value="LÅ«Å¾Ä™ 2 ilgieji kaulai/dubuo" aria-pressed="false">LÅ«Å¾Ä™ 2 ilgieji kaulai/dubuo</button>
                <button type="button" class="chip red" data-value="Kiauriniai suÅ¾. kakle/krÅ«tinÄ—je/juosmenyje" aria-pressed="false">Kiauriniai suÅ¾. kakle/krÅ«tinÄ—je/juosmenyje</button>
                <button type="button" class="chip red" data-value="Ä®tariamas vidinis kraujavimas" aria-pressed="false">Ä®tariamas vidinis kraujavimas</button>
                <button type="button" class="chip red" data-value="Nestabili krÅ«tinÄ—s lÄ…sta" aria-pressed="false">Nestabili krÅ«tinÄ—s lÄ…sta</button>
                <button type="button" class="chip red" data-value="Nudegimas &gt;18% ar KT nudegimas" aria-pressed="false">Nudegimas &gt;18% ar KT nudegimas</button>
                <button type="button" class="chip red" data-value="Amputacijos aukÅ¡Äiau plaÅ¡t./pÄ—dÅ³" aria-pressed="false">Amputacijos aukÅ¡Äiau plaÅ¡t./pÄ—dÅ³</button>
              </div>
            </div>
            <div>
              <label><strong>GELTONA</strong></label>
              <div class="chip-group" id="chips_yellow" aria-label="GELTONA">
                <button type="button" class="chip yellow" data-value="PÄ—st./dvir./motociklo trauma" aria-pressed="false">PÄ—st./dvir./motociklo trauma</button>
                <button type="button" class="chip yellow" data-value="Sprogimas/susiÅ¡audymas" aria-pressed="false">Sprogimas/susiÅ¡audymas</button>
                <button type="button" class="chip yellow" data-value="Kritimas &gt;3 m ar nardymas" aria-pressed="false">Kritimas &gt;3 m ar nardymas</button>
                <button type="button" class="chip yellow" data-value="ReikÄ—jo gelbÄ—tojÅ³ pagalbos" aria-pressed="false">ReikÄ—jo gelbÄ—tojÅ³ pagalbos</button>
              </div>
            </div>
          </div>
          <div class="hint mt-6">Auto-aktyvacija â€“ tik iÅ¡ GMP rodikliÅ³; rankiniai pakeitimai iÅ¡lieka.</div>
        </fieldset>
    </section>

    <!-- A -->
    <section class="card view" id="view-a" data-tab="A â€“ KvÄ—pavimo takai">
      <h2>A â€“ KvÄ—pavimo takai</h2>
      <label>Takai</label>
      <div class="chip-group" id="a_airway_group" data-single="true" aria-label="Takai">
        <button type="button" class="chip" data-value="Atviri" aria-pressed="false">Atviri</button>
        <button type="button" class="chip red" data-value="Obstrukcija" aria-pressed="false">Obstrukcija</button>
        <button type="button" class="chip red" data-value="Ä®vesta laringinÄ— kaukÄ—" aria-pressed="false">Ä®vesta laringinÄ— kaukÄ—</button>
        <button type="button" class="chip red" data-value="Intubuotas" aria-pressed="false">Intubuotas</button>
        <button type="button" class="chip red" data-value="Kita" aria-pressed="false">Kita</button>
      </div>
      <div class="row mt-8"><label class="m-0" for="a_notes">Pastabos</label><input id="a_notes" type="text" placeholder="Trumpai..."></div>
    </section>

    <!-- B -->
    <section class="card view" id="view-b" data-tab="B â€“ KvÄ—pavimas">
      <h2>B â€“ KvÄ—pavimas</h2>
        <fieldset class="collapsible" id="breathing-vitals">
          <legend>Gyvybiniai rodikliai</legend>
          <div class="grid cols-2 cols-auto">
            <div><label for="b_rr">KD (k./min)</label><input id="b_rr" type="number" min="0" max="80" title="KD â€“ breaths per minute, 0â€“80"></div>
            <div><label for="b_spo2">SpOâ‚‚ (%)</label><input id="b_spo2" type="number" min="0" max="100" title="SpOâ‚‚ â€“ percent, 0â€“100"></div>
          </div>
        </fieldset>
        <fieldset id="breathing-breath">
          <legend>Alsavimas</legend>
          <div class="row">
            <div>
              <div class="subtle">KairÄ—</div>
              <div class="chip-group" id="b_breath_left_group" data-single="true" aria-label="Alsavimas â€“ KairÄ—">
                <button type="button" class="chip breath-chip" data-value="Normalus" aria-label="Normalus" title="Normalus">Normalus</button>
                <button type="button" class="chip breath-chip red breath-toggle" data-value="_kita" aria-label="Kita" title="Kita">Kita</button>
                <button type="button" class="chip breath-chip red breath-option hidden" data-value="NeiÅ¡klausomas">NeiÅ¡klausomas</button>
                <button type="button" class="chip breath-chip red breath-option hidden" data-value="SusilpnÄ—jÄ™s">SusilpnÄ—jÄ™s</button>
                <button type="button" class="chip breath-chip red breath-option hidden" data-value="Kita">Kita</button>
              </div>
            </div>
            <div>
              <div class="subtle">DeÅ¡inÄ—</div>
              <div class="chip-group" id="b_breath_right_group" data-single="true" aria-label="Alsavimas â€“ DeÅ¡inÄ—">
                <button type="button" class="chip breath-chip" data-value="Normalus" aria-label="Normalus" title="Normalus">Normalus</button>
                <button type="button" class="chip breath-chip red breath-toggle" data-value="_kita" aria-label="Kita" title="Kita">Kita</button>
                <button type="button" class="chip breath-chip red breath-option hidden" data-value="NeiÅ¡klausomas">NeiÅ¡klausomas</button>
                <button type="button" class="chip breath-chip red breath-option hidden" data-value="SusilpnÄ—jÄ™s">SusilpnÄ—jÄ™s</button>
                <button type="button" class="chip breath-chip red breath-option hidden" data-value="Kita">Kita</button>
              </div>
            </div>
          </div>
        </fieldset>
        <fieldset id="breathing-vent">
          <legend>PagalbinÄ— ventiliacija</legend>
          <div class="row flex-wrap">
            <div class="row">
              <button type="button" class="btn" id="btnOxygen">O2</button>
              <div id="oxygenFields" class="row hidden">
                <input id="b_oxygen_liters" type="number" min="0" max="25" placeholder="L/min" class="w-80">
                <select id="b_oxygen_type">
                  <option value="KaukÄ— su rez.">KaukÄ— su rez.</option>
                  <option value="KaukÄ—">KaukÄ—</option>
                  <option value="NosinÄ—s kaniulÄ—s">NosinÄ—s kaniulÄ—s</option>
                </select>
              </div>
            </div>
            <div class="row">
              <button type="button" class="btn" id="btnDPV">DPV</button>
              <div id="dpvFields" class="row hidden">
                <input id="b_dpv_fio2" type="number" step="0.01" min="0" max="1" placeholder="FiOâ‚‚">
              </div>
            </div>
          </div>
        </fieldset>
    </section>

    <!-- C -->
    <section class="card view" id="view-c" data-tab="C â€“ Kraujotaka">
      <h2>C â€“ Kraujotaka</h2>
      <div class="grid cols-3 cols-auto">
        <div><label for="c_hr">Å SD (k./min)</label><input id="c_hr" type="number" min="0" max="250" title="Å SD â€“ beats per minute, 0â€“250"></div>
        <div class="row"><div class="flex-1"><label for="c_sbp">AKS s</label><input id="c_sbp" type="number" min="0" max="300" title="AKS s â€“ mmHg, 0â€“300"></div><div class="flex-1"><label for="c_dbp">AKS d</label><input id="c_dbp" type="number" min="0" max="200" title="AKS d â€“ mmHg, 0â€“200"></div><div class="flex-1"><label>VAS</label><span id="c_map"></span></div><div class="flex-1"><label>Å I</label><span id="c_si"></span></div></div>
        <div><label for="c_caprefill">KPL (sek.)</label><input id="c_caprefill" type="number" step="0.1" min="0" max="20" title="KPL â€“ seconds, 0â€“20"></div>
        <div>
          <label>Radialinis pulsas</label>
          <div class="chip-group" id="c_pulse_radial_group" data-single="true">
            <button type="button" class="chip" data-value="Stiprus" aria-pressed="false">Stiprus</button>
            <button type="button" class="chip red" data-value="Silpnas" aria-pressed="false">Silpnas</button>
          </div>
        </div>
        <div>
          <label>Femoralis pulsas</label>
          <div class="chip-group" id="c_pulse_femoral_group" data-single="true">
            <button type="button" class="chip" data-value="Stiprus" aria-pressed="false">Stiprus</button>
            <button type="button" class="chip red" data-value="Silpnas" aria-pressed="false">Silpnas</button>
          </div>
        </div>
        <div>
          <label>Odos temp.</label>
          <div class="chip-group" id="c_skin_temp_group" data-single="true">
            <button type="button" class="chip" data-value="Å ilta" aria-pressed="false">Å ilta</button>
            <button type="button" class="chip red" data-value="Å alta" aria-pressed="false">Å alta</button>
          </div>
        </div>
        <div>
          <label>Odos spalva</label>
          <div class="row">
            <div class="chip-group" id="c_skin_color_group" data-single="true">
              <button type="button" class="chip" data-value="Rausva" aria-pressed="false">Rausva</button>
              <button type="button" class="chip red" data-value="BlyÅ¡ki" aria-pressed="false">BlyÅ¡ki</button>
              <button type="button" class="chip red" data-value="Kita" aria-pressed="false">Kita</button>
            </div>
            <input id="c_skin_color_other" type="text" placeholder="Kita..." class="hidden">
          </div>
        </div>
      </div>
    </section>

    <!-- D -->
    <section class="card view" id="view-d" data-tab="D â€“ SÄ…monÄ—">
      <h2>D â€“ SÄ…monÄ—</h2>
      <div>
        <label>GKS (A-K-M) <span class="subtle">(15b. mygtukas uÅ¾pildo 4/5/6)</span></label>
        <div class="row">
            <input id="d_gksa" class="gcs-input" type="number" min="1" max="4" placeholder="A">
            <input id="d_gksk" class="gcs-input" type="number" min="1" max="5" placeholder="K">
            <input id="d_gksm" class="gcs-input" type="number" min="1" max="6" placeholder="M">
            <button type="button" class="btn" id="btnGCS15">15b.</button>
            <button type="button" class="btn" id="btnGCSCalc">SkaiÄiuoti</button>
            <span id="d_gks_total"></span>
        </div>
        <div id="d_gcs_calc" class="gcs-calc hidden">
          <div role="dialog" aria-modal="true" aria-labelledby="d_gcs_calc_title">
            <h3 id="d_gcs_calc_title" class="sr-only">GKS skaiÄiuoklÄ—</h3>
            <button type="button" class="btn ghost" id="d_gcs_close">UÅ¾daryti</button>
            <div class="grid cols-3 cols-auto">
              <div>
                <label for="d_gcs_calc_a">AkiÅ³ atmerkimas (A)</label>
                <select id="d_gcs_calc_a">
                  <option value=""></option>
                  <option value="4">akys atmerktos spontaniÅ¡kai</option>
                  <option value="3" class="red">akys atveriamos Ä¯ garsÄ…</option>
                  <option value="2" class="red">akys atveriamos Ä¯ skausmÄ…</option>
                  <option value="1" class="red">akys neatveriamos</option>
                </select>
              </div>
              <div>
                <label for="d_gcs_calc_k">Kalba (K)</label>
                <select id="d_gcs_calc_k">
                  <option value=""></option>
                  <option value="5">orientuota kalba</option>
                  <option value="4" class="red">paini kalba</option>
                  <option value="3" class="red">atskiri Å¾odÅ¾iai</option>
                  <option value="2" class="red">neaiÅ¡kÅ«s garsai</option>
                  <option value="1" class="red">nereaguoja</option>
                </select>
              </div>
              <div>
                <label for="d_gcs_calc_m">JudesiÅ³ reakcija (M)</label>
                <select id="d_gcs_calc_m">
                  <option value=""></option>
                  <option value="6">vykdo komandas</option>
                  <option value="5" class="red">lokalizuoja skausmÄ…</option>
                  <option value="4" class="red">atitraukia nuo skausmo</option>
                  <option value="3" class="red">nenormali fleksija (lenkia Ä¯ skausmÄ…)</option>
                  <option value="2" class="red">nenormali ekstensija (iÅ¡tiesia Ä¯ skausmÄ…)</option>
                  <option value="1" class="red">nereaguoja</option>
                </select>
              </div>
            </div>
            <div class="row mt-8">
              <button type="button" class="btn" id="d_gcs_apply">Taikyti</button>
              <span id="d_gcs_calc_total"></span>
            </div>
          </div>
        </div>
      </div>
      <div class="mt-8">
        <label>VyzdÅ¾iai â€“ KairÄ—</label>
        <div id="d_pupil_left_wrapper" aria-expanded="false">
          <div class="chip-group" id="d_pupil_left_group" data-single="true" aria-label="VyzdÅ¾iai â€“ KairÄ—"><button type="button" class="chip" data-value="n.y." aria-pressed="false">n.y.</button><button type="button" class="chip red" data-value="kita" aria-pressed="false">kita</button></div>
          <label for="d_pupil_left_note" class="mt-6 hidden" hidden>Pastabos</label>
          <input id="d_pupil_left_note" type="text" placeholder="Pastabos..." class="mt-6 hidden" hidden>
        </div>
      </div>
      <div class="mt-8">
        <label>VyzdÅ¾iai â€“ DeÅ¡inÄ—</label>
        <div id="d_pupil_right_wrapper" aria-expanded="false">
          <div class="chip-group" id="d_pupil_right_group" data-single="true" aria-label="VyzdÅ¾iai â€“ DeÅ¡inÄ—"><button type="button" class="chip" data-value="n.y." aria-pressed="false">n.y.</button><button type="button" class="chip red" data-value="kita" aria-pressed="false">kita</button></div>
          <label for="d_pupil_right_note" class="mt-6 hidden" hidden>Pastabos</label>
          <input id="d_pupil_right_note" type="text" placeholder="Pastabos..." class="mt-6 hidden" hidden>
        </div>
      </div>
      <div class="row mt-8"><label class="m-0" for="d_notes">Pastabos</label><input id="d_notes" type="text" placeholder="Trumpai..."></div>
    </section>

    <!-- E -->
    <section class="card view" id="view-e" data-tab="E â€“ Kita">
      <h2>E â€“ Kita</h2>
      <div class="grid cols-3 cols-auto">
        <div><label for="e_temp">TemperatÅ«ra (Â°C)</label><input id="e_temp" type="number" step="0.1" min="30" max="43"></div>
        <div><label for="e_back_notes">Nugaros apÅ¾iÅ«ra</label><div class="row"><div class="chip-group" id="e_back_group" data-single="true"><button type="button" class="chip" data-value="Be pakitimÅ³" aria-pressed="false">Be pakitimÅ³</button><button type="button" class="chip red" data-value="Pakitimai" aria-pressed="false">Pakitimai</button></div><input id="e_back_notes" type="text" placeholder="Pakitimai..." class="hidden"></div></div>
        <div><label for="e_abdomen_notes">Pilvo apÅ¾iÅ«ra</label><div class="row"><div class="chip-group" id="e_abdomen_group" data-single="true"><button type="button" class="chip" data-value="Be pakitimÅ³" aria-pressed="false">Be pakitimÅ³</button><button type="button" class="chip red" data-value="Pakitimai" aria-pressed="false">Pakitimai</button></div><input id="e_abdomen_notes" type="text" placeholder="Pakitimai..." class="hidden"></div></div>
        <div><label for="e_other">Kitos pastabos</label><input id="e_other" type="text" placeholder="..."></div>
      </div>

      <div class="divider"></div>
      <h3 class="h3-muted m-0 mb-6">KÅ«no Å¾emÄ—lapis (SVG) â€“ Å½aizda (Å½), SumuÅ¡imas (S), Nudegimas</h3>
      <div class="map-toolbar">
        <button type="button" class="tool" data-tool="Å½"><svg class="icon" viewBox="-12 -12 24 24"><circle r="8" class="mark-w"/><path d="M-6 0 L6 0 M0 -6 L0 6" class="mark-w"/></svg><span>Å½aizda</span></button>
        <button type="button" class="tool" data-tool="S"><svg class="icon" viewBox="-12 -12 24 24"><circle r="8" class="mark-b"/></svg><span>SumuÅ¡imas</span></button>
        <button type="button" class="tool" data-tool="B"><svg class="icon" viewBox="-12 -12 24 24"><circle r="8" class="burn-area"/></svg><span>Nudegimas</span></button>
        <button type="button" class="tool" data-tool="E"><span class="icon">ğŸ§½</span><span>Trintukas</span></button>
        <input id="brushSize" type="range" min="5" max="100" value="20">
        <span class="flex-1"></span>
        <button type="button" class="tool" id="btnUndo"><span class="icon">â†©</span><span>Anuliuoti</span></button>
        <button type="button" class="tool" id="btnRedo"><span class="icon">â†ª</span><span>Perdaryti</span></button>
        <button type="button" class="tool" id="btnClearMap"><span class="icon">ğŸ§¹</span><span>IÅ¡valyti</span></button>
        <button type="button" class="tool" id="btnExportSvg"><span class="icon">â¬‡</span><span>Eksportuoti SVG</span></button>
      </div>

      <!-- SVG BODY MAP -->
      <svg id="bodySvg" viewBox="0 0 1500 1090" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink">
        <!-- Marker symbols -->
        <defs>
          <g id="sym-wound">
            <circle r="14" class="mark-w"/>
            <path d="M-10 0 L10 0 M0 -10 L0 10" class="mark-w"/>
          </g>
          <g id="sym-bruise">
            <circle r="10" class="mark-b"/>
          </g>
        </defs>

        <!-- FRONT silhouette -->
        <g id="layer-front" transform="translate(0,0)">
          <text x="16" y="28" class="label">PRIEKIS</text>
          <svg id="front-shape" class="silhouette" data-side="front" viewBox="0 0 24 24" width="750" height="1090">
              <path d="M12,2A2,2 0 0,1 14,4A2,2 0 0,1 12,6A2,2 0 0,1 10,4A2,2 0 0,1 12,2M10.5,7H13.5A2,2 0 0,1 15.5,9V14.5H14V22H10V14.5H8.5V9A2,2 0 0,1 10.5,7Z"/>
            </svg>
        </g>

        <!-- BACK silhouette -->
        <g id="layer-back" transform="translate(750,0)">
          <text x="16" y="28" class="label">NUGARA</text>
          <svg id="back-shape" class="silhouette" data-side="back" viewBox="0 0 24 24" width="750" height="1090">
              <path d="M12,2A2,2 0 0,1 14,4A2,2 0 0,1 12,6A2,2 0 0,1 10,4A2,2 0 0,1 12,2M10.5,7H13.5A2,2 0 0,1 15.5,9V14.5H14V22H10V14.5H8.5V9A2,2 0 0,1 10.5,7Z"/>
            </svg>
        </g>

        <!-- MARKS container -->
        <g id="marks"></g>
      </svg>
      <div id="burnTotal" class="hint mt-2"></div>
      <div class="hint">SpragtelÄ—kite ant figÅ«ros â€“ Ä¯dedama pasirinkta Å¾yma.</div>
    </section>

    <!-- Intervencijos -->
    <section class="card view" id="view-intervencijos" data-tab="Intervencijos">
      <h2>Intervencijos</h2>
      <input id="medSearch" type="text" placeholder="IeÅ¡koti intervencijÅ³â€¦" aria-label="IeÅ¡koti intervencijÅ³" class="med-search">
      <div class="interv-groups">
        <section class="interv-group">
          <button class="interv-toggle" aria-expanded="true">ğŸ’Š Medikamentai â€“ skausmo kontrolÄ—</button>
          <div class="grid" id="pain_meds"></div>
        </section>
        <section class="interv-group">
          <button class="interv-toggle" aria-expanded="true">ğŸ’Š Medikamentai â€“ kraujavimo kontrolÄ—</button>
          <div class="grid cols-3 cols-auto" id="bleeding_meds"></div>
        </section>
        <section class="interv-group">
          <button class="interv-toggle" aria-expanded="true">ğŸ’Š Medikamentai â€“ kita</button>
          <div class="grid cols-3 cols-auto" id="other_meds"></div>
        </section>
        <section class="interv-group">
          <button class="interv-toggle" aria-expanded="true">ğŸ›  ProcedÅ«ros</button>
          <div class="grid cols-3 cols-auto" id="procedures"></div>
        </section>
      </div>
      <div class="hint mt-6">Paspaudus ant vaisto automatiÅ¡kai uÅ¾pildomi laikas ir standartinÄ— dozÄ— (galima koreguoti), o ant procedÅ«ros â€“ tik laikas.</div>
    </section>

    <!-- Vaizdai / Laboratorija / Komanda / Sprendimas / Santrauka -->
    <section class="card view" id="view-vaizdiniai-tyrimai" data-tab="Vaizdiniai tyrimai">
      <h2>Vaizdiniai tyrimai</h2>
      <h3 class="h3-muted">FAST</h3>
      <div class="grid cols-3 cols-auto" id="fastGrid"></div>
      <h3 class="h3-muted mt-8">KT</h3>
      <div class="chip-group" id="imaging_ct" aria-label="KT"></div>
      <h3 class="h3-muted mt-8">Rentgenogramos</h3>
      <div class="chip-group" id="imaging_xray" aria-label="Rentgenogramos"></div>
      <h3 class="h3-muted mt-8">Kiti</h3>
      <div class="chip-group" id="imaging_other_group" aria-label="Kiti vaizdiniai tyrimai"></div>
      <input id="imaging_other" type="text" placeholder="Ä®vesti kitÄ… tyrimÄ…" class="hidden mt-8">
    </section>
    <section class="card view" id="view-laboratorija" data-tab="Laboratorija">
      <h2>Laboratoriniai tyrimai</h2>
      <div class="chip-group" id="labs_basic" aria-label="Laboratoriniai tyrimai"></div>
      <div class="blood-order-box">
        <label for="bloodUnits">Kraujo uÅ¾sakymas</label>
        <div class="row flex-wrap">
          <input type="number" id="bloodUnits" placeholder="Vnt" class="w-80">
          <div class="chip-group" id="bloodGroup" data-single="true" aria-label="Kraujo grupÄ—"></div>
          <button type="button" class="btn" id="addBloodOrder">PridÄ—ti</button>
        </div>
      </div>
    </section>
    <section class="card view" id="view-komanda" data-tab="Komanda"><h2>Komandos nariai</h2><div class="grid cols-3 cols-auto" id="teamGrid"></div></section>
    <section class="card view" id="view-sprendimas" data-tab="Sprendimas">
      <h2>Sprendimas</h2>
      <div><label for="spr_time">Laikas</label><div class="row"><input id="spr_time" type="time"><button type="button" class="btn ghost" id="btnSprNow">Dabar</button></div></div>
      <div class="mt-8">
        <label>Sprendimas</label>
        <div class="chip-group" id="spr_decision_group" data-single="true" aria-label="Sprendimas">
          <button type="button" class="chip" data-value="Stacionarizavimas" aria-pressed="false">Stacionarizavimas</button>
          <button type="button" class="chip" data-value="Namo" aria-pressed="false">Namo</button>
          <button type="button" class="chip" data-value="StebÄ—jimas SMPS" aria-pressed="false">StebÄ—jimas SMPS</button>
          <button type="button" class="chip" data-value="Mirtis" aria-pressed="false">Mirtis</button>
          <button type="button" class="chip" data-value="PerveÅ¾imas Ä¯ kitÄ… ligoninÄ™" aria-pressed="false">PerveÅ¾imas Ä¯ kitÄ… ligoninÄ™</button>
        </div>
      </div>
      <div id="spr_skyrius_container" class="hidden mt-8">
        <label for="spr_skyrius">Skyrius</label>
        <select id="spr_skyrius">
          <option value=""></option>
          <option value="CHRITS">CHRITS</option>
          <option value="Traumatologijos">Traumatologijos</option>
          <option value="Chirurgijos">Chirurgijos</option>
          <option value="Neurochirurgijos">Neurochirurgijos</option>
          <option value="Kita">Kita</option>
        </select>
        <input id="spr_skyrius_kita" type="text" placeholder="Kitas skyrius" class="hidden mt-4">
      </div>
      <div id="spr_ligonine_container" class="hidden mt-8">
        <label for="spr_ligonine">LigoninÄ—</label>
        <input id="spr_ligonine" type="text" placeholder="LigoninÄ—">
      </div>
      <div class="grid cols-3 cols-auto mt-8">
        <div><label for="spr_hr">Å SD (k./min)</label><input id="spr_hr" type="number" min="0" max="250"></div>
        <div><label for="spr_rr">KD (k./min)</label><input id="spr_rr" type="number" min="0" max="80"></div>
        <div><label for="spr_spo2">SpOâ‚‚ (%)</label><input id="spr_spo2" type="number" min="0" max="100"></div>
      </div>
      <div class="row mt-8">
        <div class="flex-1"><label for="spr_sbp">AKS s</label><input id="spr_sbp" type="number" min="0" max="300"></div>
        <div class="flex-1"><label for="spr_dbp">AKS d</label><input id="spr_dbp" type="number" min="0" max="200"></div>
      </div>
      <div class="mt-8">
        <label>GKS (A-K-M)</label>
        <div class="row">
          <input id="spr_gksa" type="number" min="1" max="4" placeholder="A">
          <input id="spr_gksk" type="number" min="1" max="5" placeholder="K">
          <input id="spr_gksm" type="number" min="1" max="6" placeholder="M">
          <button type="button" class="btn" id="btnSprGCSCalc">SkaiÄiuoti</button>
          <span id="spr_gks_total"></span>
        </div>
        <div id="spr_gcs_calc" class="gcs-calc hidden">
          <div role="dialog" aria-modal="true" aria-labelledby="spr_gcs_calc_title">
            <h3 id="spr_gcs_calc_title" class="sr-only">GKS skaiÄiuoklÄ—</h3>
            <button type="button" class="btn ghost" id="spr_gcs_close">UÅ¾daryti</button>
            <div class="grid cols-3 cols-auto">
              <div>
                <label for="spr_gcs_calc_a">AkiÅ³ atmerkimas (A)</label>
                <select id="spr_gcs_calc_a">
                  <option value=""></option>
                  <option value="4">akys atmerktos spontaniÅ¡kai</option>
                  <option value="3">akys atveriamos Ä¯ garsÄ…</option>
                  <option value="2">akys atveriamos Ä¯ skausmÄ…</option>
                  <option value="1">akys neatveriamos</option>
                </select>
              </div>
              <div>
                <label for="spr_gcs_calc_k">Kalba (K)</label>
                <select id="spr_gcs_calc_k">
                  <option value=""></option>
                  <option value="5">orientuota kalba</option>
                  <option value="4">paini kalba</option>
                  <option value="3">atskiri Å¾odÅ¾iai</option>
                  <option value="2">neaiÅ¡kÅ«s garsai</option>
                  <option value="1">nereaguoja</option>
                </select>
              </div>
              <div>
                <label for="spr_gcs_calc_m">JudesiÅ³ reakcija (M)</label>
                <select id="spr_gcs_calc_m">
                  <option value=""></option>
                  <option value="6">vykdo komandas</option>
                  <option value="5">lokalizuoja skausmÄ…</option>
                  <option value="4">atitraukia nuo skausmo</option>
                  <option value="3">nenormali fleksija (lenkia Ä¯ skausmÄ…)</option>
                  <option value="2">nenormali ekstensija (iÅ¡tiesia Ä¯ skausmÄ…)</option>
                  <option value="1">nereaguoja</option>
                </select>
              </div>
            </div>
            <div class="row mt-8">
              <button type="button" class="btn" id="spr_gcs_apply">Taikyti</button>
              <span id="spr_gcs_calc_total"></span>
            </div>
          </div>
        </div>
      </div>
    </section>
    <section class="card view" id="view-laiko-juosta" data-tab="Laiko juosta">
      <h2>Laiko juosta</h2>
      <div class="row mb-8">
        <select id="timelineFilter">
          <option value="">Visi</option>
          <option value="med">Vaistai</option>
          <option value="proc">ProcedÅ«ros</option>
        <option value="vital">Gyvybiniai rodikliai</option>
      </select>
      <button type="button" class="btn" id="timelineExport">Eksportuoti</button>
      <button type="button" class="btn" id="timelineClear">IÅ¡valyti</button>
    </div>
    <div id="timelineGraph" class="timeline-graph mb-8"></div>
    <div id="timelineList" class="timeline-list"></div>
  </section>
    <section class="card view" id="view-santrauka" data-tab="Santrauka"><h2>Sugeneruotas tekstas</h2><textarea id="output" placeholder="Santrauka sugeneruojama automatiÅ¡kai"></textarea><div class="row mb-8"><button type="button" class="btn" id="btnCopyReport">Kopijuoti</button><button type="button" class="btn" id="btnPdfReport">PDF</button><button type="button" class="btn" id="btnPrintReport">Spausdinti</button></div><div class="hint">TekstÄ… galima Ä¯klijuoti Ä¯ LIS/ESIS.</div></section>
  </div>
</main>

<script src="https://unpkg.com/vis-timeline@8.3.0/standalone/umd/vis-timeline-graph2d.min.js"></script>
<script src="https://cdn.socket.io/4.7.5/socket.io.min.js" integrity="sha384-2huaZvOR9iDzHqslqwpR87isEmrfxqyWOF7hr7BY6KG0+hVKLoEXMPUJw3ynWuhO" crossorigin="anonymous"></script>
<script src="js/app.js" defer type="module"></script>
</body>
</html>
